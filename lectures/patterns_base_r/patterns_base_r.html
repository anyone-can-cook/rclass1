<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">

<title>Investigating objects using Base R &amp; subsetting with subset operators</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="patterns_base_r_files/libs/clipboard/clipboard.min.js"></script>
<script src="patterns_base_r_files/libs/quarto-html/quarto.js"></script>
<script src="patterns_base_r_files/libs/quarto-html/popper.min.js"></script>
<script src="patterns_base_r_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="patterns_base_r_files/libs/quarto-html/anchor.min.js"></script>
<link href="patterns_base_r_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="patterns_base_r_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="patterns_base_r_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="patterns_base_r_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="patterns_base_r_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#investigate-objects-base-r" id="toc-investigate-objects-base-r" class="nav-link active" data-scroll-target="#investigate-objects-base-r"><span class="header-section-number">1</span> Investigate objects, base R</a>
  <ul class="collapse">
  <li><a href="#functions-to-describe-objects" id="toc-functions-to-describe-objects" class="nav-link" data-scroll-target="#functions-to-describe-objects"><span class="header-section-number">1.1</span> Functions to describe objects</a>
  <ul class="collapse">
  <li><a href="#listing-objects" id="toc-listing-objects" class="nav-link" data-scroll-target="#listing-objects"><span class="header-section-number">1.1.1</span> Listing objects</a></li>
  <li><a href="#objects-currently-open-in-your-r-session" id="toc-objects-currently-open-in-your-r-session" class="nav-link" data-scroll-target="#objects-currently-open-in-your-r-session"><span class="header-section-number">1.1.2</span> Objects currently open in your R session</a></li>
  <li><a href="#base-r-functions-to-describe-objects-typeof" id="toc-base-r-functions-to-describe-objects-typeof" class="nav-link" data-scroll-target="#base-r-functions-to-describe-objects-typeof"><span class="header-section-number">1.1.3</span> Base R functions to describe objects, <code>typeof()</code></a></li>
  <li><a href="#base-r-functions-to-describe-objects-length" id="toc-base-r-functions-to-describe-objects-length" class="nav-link" data-scroll-target="#base-r-functions-to-describe-objects-length"><span class="header-section-number">1.1.4</span> Base R functions to describe objects, <code>length()</code></a></li>
  <li><a href="#base-r-functions-to-describe-objects-str" id="toc-base-r-functions-to-describe-objects-str" class="nav-link" data-scroll-target="#base-r-functions-to-describe-objects-str"><span class="header-section-number">1.1.5</span> Base R functions to describe objects, <code>str()</code></a></li>
  <li><a href="#base-r-functions-to-describe-objects-ncol-and-nrow" id="toc-base-r-functions-to-describe-objects-ncol-and-nrow" class="nav-link" data-scroll-target="#base-r-functions-to-describe-objects-ncol-and-nrow"><span class="header-section-number">1.1.6</span> Base R functions to describe objects, <code>ncol()</code> and <code>nrow()</code></a></li>
  <li><a href="#base-r-functions-to-describe-objects-dim" id="toc-base-r-functions-to-describe-objects-dim" class="nav-link" data-scroll-target="#base-r-functions-to-describe-objects-dim"><span class="header-section-number">1.1.7</span> Base R functions to describe objects, <code>dim()</code></a></li>
  </ul></li>
  <li><a href="#variables-names" id="toc-variables-names" class="nav-link" data-scroll-target="#variables-names"><span class="header-section-number">1.2</span> Variables names</a>
  <ul class="collapse">
  <li><a href="#names-function" id="toc-names-function" class="nav-link" data-scroll-target="#names-function"><span class="header-section-number">1.2.1</span> <code>names()</code> function</a></li>
  <li><a href="#applying-names-function-to-a-data-frame" id="toc-applying-names-function-to-a-data-frame" class="nav-link" data-scroll-target="#applying-names-function-to-a-data-frame"><span class="header-section-number">1.2.2</span> Applying <code>names()</code> function to a data frame</a></li>
  <li><a href="#variable-names" id="toc-variable-names" class="nav-link" data-scroll-target="#variable-names"><span class="header-section-number">1.2.3</span> Variable names</a></li>
  </ul></li>
  <li><a href="#view-and-print-data" id="toc-view-and-print-data" class="nav-link" data-scroll-target="#view-and-print-data"><span class="header-section-number">1.3</span> View and print data</a>
  <ul class="collapse">
  <li><a href="#viewing-and-printing-data-frames" id="toc-viewing-and-printing-data-frames" class="nav-link" data-scroll-target="#viewing-and-printing-data-frames"><span class="header-section-number">1.3.1</span> Viewing and printing, data frames</a></li>
  <li><a href="#viewing-and-printing-data-frames-1" id="toc-viewing-and-printing-data-frames-1" class="nav-link" data-scroll-target="#viewing-and-printing-data-frames-1"><span class="header-section-number">1.3.2</span> Viewing and printing, data frames</a></li>
  <li><a href="#viewing-and-printing-variables-within-data-frames" id="toc-viewing-and-printing-variables-within-data-frames" class="nav-link" data-scroll-target="#viewing-and-printing-variables-within-data-frames"><span class="header-section-number">1.3.3</span> Viewing and printing, variables within data frames</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise"><span class="header-section-number">1.3.4</span> Exercise</a></li>
  </ul></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values"><span class="header-section-number">1.4</span> Missing values</a>
  <ul class="collapse">
  <li><a href="#missing-values-1" id="toc-missing-values-1" class="nav-link" data-scroll-target="#missing-values-1"><span class="header-section-number">1.4.1</span> Missing values</a></li>
  <li><a href="#missing-values-are-contagious" id="toc-missing-values-are-contagious" class="nav-link" data-scroll-target="#missing-values-are-contagious"><span class="header-section-number">1.4.2</span> Missing values are “contagious”</a></li>
  <li><a href="#functions-and-missing-values-example-table" id="toc-functions-and-missing-values-example-table" class="nav-link" data-scroll-target="#functions-and-missing-values-example-table"><span class="header-section-number">1.4.3</span> Functions and missing values example, <code>table()</code></a></li>
  </ul></li>
  </ul></li>
  <li><a href="#subsetting-using-subset-operators" id="toc-subsetting-using-subset-operators" class="nav-link" data-scroll-target="#subsetting-using-subset-operators"><span class="header-section-number">2</span> Subsetting using subset operators</a>
  <ul class="collapse">
  <li><a href="#subsetting-to-extract-elements" id="toc-subsetting-to-extract-elements" class="nav-link" data-scroll-target="#subsetting-to-extract-elements"><span class="header-section-number">2.0.1</span> Subsetting to Extract Elements</a></li>
  <li><a href="#wichham-refers-to-number-of-dimensions-in-r-objects" id="toc-wichham-refers-to-number-of-dimensions-in-r-objects" class="nav-link" data-scroll-target="#wichham-refers-to-number-of-dimensions-in-r-objects"><span class="header-section-number">2.0.2</span> Wichham refers to number of “dimensions” in R objects</a></li>
  <li><a href="#subset-atomic-vectors-using" id="toc-subset-atomic-vectors-using" class="nav-link" data-scroll-target="#subset-atomic-vectors-using"><span class="header-section-number">2.1</span> Subset atomic vectors using []</a>
  <ul class="collapse">
  <li><a href="#using-positive-integers-to-return-elements-at-specified-positions-subset-atomic-vectors-using" id="toc-using-positive-integers-to-return-elements-at-specified-positions-subset-atomic-vectors-using" class="nav-link" data-scroll-target="#using-positive-integers-to-return-elements-at-specified-positions-subset-atomic-vectors-using"><span class="header-section-number">2.1.1</span> 1. Using positive integers to return elements at specified positions (subset atomic vectors using [])</a></li>
  <li><a href="#using-negative-integers-to-exclude-elements-at-specified-positions-subset-atomic-vectors-using" id="toc-using-negative-integers-to-exclude-elements-at-specified-positions-subset-atomic-vectors-using" class="nav-link" data-scroll-target="#using-negative-integers-to-exclude-elements-at-specified-positions-subset-atomic-vectors-using"><span class="header-section-number">2.1.2</span> 2. Using negative integers to exclude elements at specified positions (subset atomic vectors using [])</a></li>
  <li><a href="#using-logicals-to-return-elements-where-corresponding-logical-is-true-subset-atomic-vectors-using" id="toc-using-logicals-to-return-elements-where-corresponding-logical-is-true-subset-atomic-vectors-using" class="nav-link" data-scroll-target="#using-logicals-to-return-elements-where-corresponding-logical-is-true-subset-atomic-vectors-using"><span class="header-section-number">2.1.3</span> 3. Using logicals to return elements where corresponding logical is <code>TRUE</code> (subset atomic vectors using [])</a></li>
  <li><a href="#empty-returns-original-vector-subset-atomic-vectors-using" id="toc-empty-returns-original-vector-subset-atomic-vectors-using" class="nav-link" data-scroll-target="#empty-returns-original-vector-subset-atomic-vectors-using"><span class="header-section-number">2.1.4</span> 4. Empty <code>[]</code> returns original vector (subset atomic vectors using [])</a></li>
  <li><a href="#zero-vector-0-subset-atomic-vectors-using" id="toc-zero-vector-0-subset-atomic-vectors-using" class="nav-link" data-scroll-target="#zero-vector-0-subset-atomic-vectors-using"><span class="header-section-number">2.1.5</span> 5. Zero vector [0] (subset atomic vectors using [])</a></li>
  <li><a href="#if-vector-is-named-character-vectors-to-return-elements-with-matching-names-subset-atomic-vectors-using" id="toc-if-vector-is-named-character-vectors-to-return-elements-with-matching-names-subset-atomic-vectors-using" class="nav-link" data-scroll-target="#if-vector-is-named-character-vectors-to-return-elements-with-matching-names-subset-atomic-vectors-using"><span class="header-section-number">2.1.6</span> 6. If vector is named, character vectors to return elements with matching names (subset atomic vectors using [])</a></li>
  </ul></li>
  <li><a href="#subsetting-listsdata-frames-using" id="toc-subsetting-listsdata-frames-using" class="nav-link" data-scroll-target="#subsetting-listsdata-frames-using"><span class="header-section-number">2.2</span> Subsetting lists/data frames using []</a>
  <ul class="collapse">
  <li><a href="#subsetting-data-frames-using-to-extract-columns-variables-based-on-element-position" id="toc-subsetting-data-frames-using-to-extract-columns-variables-based-on-element-position" class="nav-link" data-scroll-target="#subsetting-data-frames-using-to-extract-columns-variables-based-on-element-position"><span class="header-section-number">2.2.1</span> Subsetting data frames using [] to extract columns (variables) based on element position</a></li>
  <li><a href="#subsetting-data-frames-to-extract-columns-variables-and-rows-observations-based-on-positionality" id="toc-subsetting-data-frames-to-extract-columns-variables-and-rows-observations-based-on-positionality" class="nav-link" data-scroll-target="#subsetting-data-frames-to-extract-columns-variables-and-rows-observations-based-on-positionality"><span class="header-section-number">2.2.2</span> Subsetting Data Frames to extract columns (variables) and rows (observations) based on positionality</a></li>
  <li><a href="#use-to-extract-data-frame-columns-based-on-variable-names" id="toc-use-to-extract-data-frame-columns-based-on-variable-names" class="nav-link" data-scroll-target="#use-to-extract-data-frame-columns-based-on-variable-names"><span class="header-section-number">2.2.3</span> Use [] to extract data frame columns based on variable names</a></li>
  <li><a href="#student-exercises" id="toc-student-exercises" class="nav-link" data-scroll-target="#student-exercises"><span class="header-section-number">2.2.4</span> Student exercises</a></li>
  </ul></li>
  <li><a href="#subsetting-listsdata-frames-using-and" id="toc-subsetting-listsdata-frames-using-and" class="nav-link" data-scroll-target="#subsetting-listsdata-frames-using-and"><span class="header-section-number">2.3</span> Subsetting lists/data frames using [[]] and $</a>
  <ul class="collapse">
  <li><a href="#subset-single-element-from-object-using-operator-atomic-vectors" id="toc-subset-single-element-from-object-using-operator-atomic-vectors" class="nav-link" data-scroll-target="#subset-single-element-from-object-using-operator-atomic-vectors"><span class="header-section-number">2.3.1</span> Subset single element from object using [[]] operator, atomic vectors</a></li>
  <li><a href="#subsetting-lists-using-vs.-introduce-train-metaphor" id="toc-subsetting-lists-using-vs.-introduce-train-metaphor" class="nav-link" data-scroll-target="#subsetting-lists-using-vs.-introduce-train-metaphor"><span class="header-section-number">2.3.2</span> Subsetting lists using <code>[]</code> vs.&nbsp;<code>[[]]</code>, introduce “train metaphor”</a></li>
  <li><a href="#subset-lists-using-vs.-deepen-understanding-of" id="toc-subset-lists-using-vs.-deepen-understanding-of" class="nav-link" data-scroll-target="#subset-lists-using-vs.-deepen-understanding-of"><span class="header-section-number">2.3.3</span> Subset lists using <code>[]</code> vs.&nbsp;<code>[[]]</code>, deepen understanding of <code>[]</code></a></li>
  <li><a href="#general-rules-of-applying-vs-to-nested-objects" id="toc-general-rules-of-applying-vs-to-nested-objects" class="nav-link" data-scroll-target="#general-rules-of-applying-vs-to-nested-objects"><span class="header-section-number">2.3.4</span> General rules of applying <code>[]</code> vs <code>[[]]</code> to (nested) objects</a></li>
  <li><a href="#subset-listsdata-frames-using" id="toc-subset-listsdata-frames-using" class="nav-link" data-scroll-target="#subset-listsdata-frames-using"><span class="header-section-number">2.3.5</span> Subset lists/data frames using $</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"><span class="header-section-number">3</span> Appendix</a>
  <ul class="collapse">
  <li><a href="#subset-data-frames-by-combining-and" id="toc-subset-data-frames-by-combining-and" class="nav-link" data-scroll-target="#subset-data-frames-by-combining-and"><span class="header-section-number">3.1</span> Subset Data frames by combining [] and $</a>
  <ul class="collapse">
  <li><a href="#subset-data-frames-by-combining-and-decompose-syntax" id="toc-subset-data-frames-by-combining-and-decompose-syntax" class="nav-link" data-scroll-target="#subset-data-frames-by-combining-and-decompose-syntax"><span class="header-section-number">3.1.1</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, decompose syntax</a></li>
  <li><a href="#subset-data-frames-by-combining-and-keep-desired-columns" id="toc-subset-data-frames-by-combining-and-keep-desired-columns" class="nav-link" data-scroll-target="#subset-data-frames-by-combining-and-keep-desired-columns"><span class="header-section-number">3.1.2</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, keep desired columns</a></li>
  <li><a href="#subset-data-frames-by-combining-and-more-examples" id="toc-subset-data-frames-by-combining-and-more-examples" class="nav-link" data-scroll-target="#subset-data-frames-by-combining-and-more-examples"><span class="header-section-number">3.1.3</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, more examples</a></li>
  <li><a href="#logical-operators-for-comparisons" id="toc-logical-operators-for-comparisons" class="nav-link" data-scroll-target="#logical-operators-for-comparisons"><span class="header-section-number">3.1.4</span> Logical operators for comparisons</a></li>
  <li><a href="#subset-data-frames-by-combining-and-na-observations" id="toc-subset-data-frames-by-combining-and-na-observations" class="nav-link" data-scroll-target="#subset-data-frames-by-combining-and-na-observations"><span class="header-section-number">3.1.5</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, <code>NA</code> Observations</a></li>
  <li><a href="#student-exercises-1" id="toc-student-exercises-1" class="nav-link" data-scroll-target="#student-exercises-1"><span class="header-section-number">3.1.6</span> Student Exercises</a></li>
  </ul></li>
  <li><a href="#subset-using-subset-function" id="toc-subset-using-subset-function" class="nav-link" data-scroll-target="#subset-using-subset-function"><span class="header-section-number">3.2</span> Subset using subset() function</a>
  <ul class="collapse">
  <li><a href="#subset-function-examples" id="toc-subset-function-examples" class="nav-link" data-scroll-target="#subset-function-examples"><span class="header-section-number">3.2.1</span> Subset function, examples</a></li>
  <li><a href="#student-exercises-2" id="toc-student-exercises-2" class="nav-link" data-scroll-target="#student-exercises-2"><span class="header-section-number">3.2.2</span> Student Exercises</a></li>
  </ul></li>
  <li><a href="#creating-variables" id="toc-creating-variables" class="nav-link" data-scroll-target="#creating-variables"><span class="header-section-number">3.3</span> Creating variables</a>
  <ul class="collapse">
  <li><a href="#create-new-data-frame-based-on-df_school_all" id="toc-create-new-data-frame-based-on-df_school_all" class="nav-link" data-scroll-target="#create-new-data-frame-based-on-df_school_all"><span class="header-section-number">3.3.1</span> Create new data frame based on <code>df_school_all</code></a></li>
  <li><a href="#base-r-approach-to-creating-new-variables" id="toc-base-r-approach-to-creating-new-variables" class="nav-link" data-scroll-target="#base-r-approach-to-creating-new-variables"><span class="header-section-number">3.3.2</span> Base R approach to creating new variables</a></li>
  </ul></li>
  <li><a href="#sorting-data" id="toc-sorting-data" class="nav-link" data-scroll-target="#sorting-data"><span class="header-section-number">3.4</span> Sorting data</a>
  <ul class="collapse">
  <li><a href="#base-r-sort-for-vectors" id="toc-base-r-sort-for-vectors" class="nav-link" data-scroll-target="#base-r-sort-for-vectors"><span class="header-section-number">3.4.1</span> Base R <code>sort()</code> for vectors</a></li>
  <li><a href="#base-r-order-for-dataframes" id="toc-base-r-order-for-dataframes" class="nav-link" data-scroll-target="#base-r-order-for-dataframes"><span class="header-section-number">3.4.2</span> Base R <code>order()</code> for dataframes</a></li>
  <li><a href="#example-sorting" id="toc-example-sorting" class="nav-link" data-scroll-target="#example-sorting"><span class="header-section-number">3.4.3</span> Example, sorting</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Investigating objects using Base R &amp; subsetting with subset operators</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="investigate-objects-base-r" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Investigate objects, base R</h1>
<p><strong>Load .Rdata data frames we will use today</strong></p>
<p>Data on off-campus recruiting events by public universities</p>
<ul>
<li>Data frame object <code>df_event</code>
<ul>
<li>One observation per university, recruiting event</li>
</ul></li>
<li>Data frame object <code>df_school</code>
<ul>
<li>One observation per high school (visited and non-visited)</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>()) <span class="co"># remove all objects in current environment</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "/Users/jaquette/Documents/rclass1/lectures/patterns_base_r"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#load dataset with one obs per recruiting event</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/ozanj/rclass/raw/master/data/recruiting/recruit_event_somevars.RData"</span>))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#load("../../data/recruiting/recruit_event_somevars.Rdata")</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#load dataset with one obs per high school</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/ozanj/rclass/raw/master/data/recruiting/recruit_school_somevars.RData"</span>))</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#load("../../data/recruiting/recruit_school_somevars.Rdata")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="functions-to-describe-objects" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="functions-to-describe-objects"><span class="header-section-number">1.1</span> Functions to describe objects</h2>
<p>This section introduces some base R functions to describe objects (some of these you have seen before)</p>
<ul>
<li>list objects, <code>list.files()</code> and <code>ls()</code></li>
<li>remove objects, <code>rm()</code></li>
<li>object type, <code>typeof()</code></li>
<li>object length (number of elements), <code>length()</code></li>
<li>object structure, <code>str()</code></li>
<li>number of rows and columns, <code>ncol()</code> and <code>nrow()</code></li>
</ul>
<p>I use the functions <code>typeof()</code>, <code>length()</code>, <code>str()</code> anytime I encounter a new object</p>
<ul>
<li>Helps me understand the object before I start working with it</li>
</ul>
<section id="listing-objects" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="listing-objects"><span class="header-section-number">1.1.1</span> Listing objects</h3>
<p><strong>Files in your working directory</strong></p>
<p><code>list.files()</code> function lists files in your current working directory</p>
<ul>
<li>if you run this code from .qmd file, working directory is the location where the .qmd file is stored.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co"># what is your current working directory</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "/Users/jaquette/Documents/rclass1/lectures/patterns_base_r"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "base_r_week1_video_lecture_script.R" "fp1.JPG"                            </span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] "fp2.JPG"                             "one_carriage_train_vs_contents.png" </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] "patterns_base_r_files"               "patterns_base_r.html"               </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "patterns_base_r.qmd"                 "patterns_base_r.rmarkdown"          </span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] "smaller_trains.png"                  "test.txt"                           </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] "three_carriage_train.png"            "transform-logical.png"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="objects-currently-open-in-your-r-session" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="objects-currently-open-in-your-r-session"><span class="header-section-number">1.1.2</span> Objects currently open in your R session</h3>
<p><strong>Listing objects currently open in your R session</strong></p>
<p><code>ls()</code> function lists objects currently open in R</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"hello!"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>() <span class="co"># Objects open in R</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "df_event"  "df_school" "x"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Removing objects currently open in your R session</strong></p>
<p><code>rm()</code> function removes specified objects open in R</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(x)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "df_event"  "df_school"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Command to remove all objects open in R (I don’t run it)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#rm(list = ls())</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-r-functions-to-describe-objects-typeof" class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="base-r-functions-to-describe-objects-typeof"><span class="header-section-number">1.1.3</span> Base R functions to describe objects, <code>typeof()</code></h3>
<p><code>typeof()</code> function determines the the internal storage type of an object (e.g., logical vector, integer vector, list)</p>
<ul>
<li>syntax
<ul>
<li><code>tyepof(x)</code></li>
</ul></li>
<li>arguments
<ul>
<li><code>x</code>: any R object</li>
</ul></li>
<li>help:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>?typeof</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Examples</p>
<ul>
<li>Recall that a data frame is an object where <strong>type</strong> is a list</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>))</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "logical"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_event)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "list"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="at">x =</span> df_event)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "list"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-r-functions-to-describe-objects-length" class="level3" data-number="1.1.4">
<h3 data-number="1.1.4" class="anchored" data-anchor-id="base-r-functions-to-describe-objects-length"><span class="header-section-number">1.1.4</span> Base R functions to describe objects, <code>length()</code></h3>
<p><code>length()</code> function determines the length of an R object</p>
<ul>
<li>for atomic vectors and lists, <code>length()</code> is the number of elements in the object</li>
<li>syntax
<ul>
<li><code>length(x)</code></li>
</ul></li>
<li>arguments
<ul>
<li><code>x</code>: any R object</li>
</ul></li>
<li>help:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>?length</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Example, length of an atomic vector is</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Example, length of a list or data frame</p>
<ul>
<li>length of a list is the number of elements</li>
<li>data frame is a list</li>
<li>length of a data frame = number of elements = number of variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_event) <span class="co"># = num elements = num columns</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-r-functions-to-describe-objects-str" class="level3" data-number="1.1.5">
<h3 data-number="1.1.5" class="anchored" data-anchor-id="base-r-functions-to-describe-objects-str"><span class="header-section-number">1.1.5</span> Base R functions to describe objects, <code>str()</code></h3>
<p><code>str()</code> function compactly displays the structure of an R object</p>
<ul>
<li>“structure” includes type, length, and attribute of object and also nested objects</li>
<li>syntax: <code>str(object)</code></li>
<li>arguments (partial)
<ul>
<li><code>object</code>: any R object</li>
<li><code>max.level</code>: max level of nesting to display nested structures; default <code>NA</code> = all levels</li>
</ul></li>
<li>help: <code>?str</code></li>
</ul>
<p>Example, atomic vectors</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  logi [1:4] TRUE TRUE FALSE NA</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="at">object =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  logi [1:4] TRUE TRUE FALSE NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Example, lists/data frames (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">list</span>(<span class="st">"apple"</span>, <span class="st">"orange"</span>), <span class="fu">list</span>(<span class="dv">2</span>, <span class="dv">3</span>)) <span class="co"># list</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event) <span class="co"># data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-r-functions-to-describe-objects-ncol-and-nrow" class="level3" data-number="1.1.6">
<h3 data-number="1.1.6" class="anchored" data-anchor-id="base-r-functions-to-describe-objects-ncol-and-nrow"><span class="header-section-number">1.1.6</span> Base R functions to describe objects, <code>ncol()</code> and <code>nrow()</code></h3>
<p><code>ncol()</code> <code>nrow()</code> and <code>dim()</code> functions</p>
<ul>
<li>Description
<ul>
<li><code>ncol()</code> = number of columns; <code>nrow()</code> = number of rows</li>
</ul></li>
<li>syntax: <code>ncol(x)</code> <code>nrow(x)</code> <code>dim(x)</code></li>
<li>arguments
<ul>
<li><code>x</code>: a vector, array, data frame, or NULL</li>
</ul></li>
<li>value/return:
<ul>
<li>if object <code>x</code> is an atomic vector: <code>ncol()</code> and <code>nrow()</code> returns <code>NULL</code></li>
<li>if object <code>x</code> is a list but not a data frame: <code>ncol()</code> and <code>nrow()</code> returns <code>NULL</code></li>
<li>if object <code>x</code> is a data frame: <code>ncol()</code> and <code>nrow()</code> returns integer of length 1</li>
</ul></li>
</ul>
<p>Example, object is a data frame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(df_event) <span class="co"># num columns = num elements = num variables</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 33</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event) <span class="co"># num rows = num observations</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18680</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># can wrap ncol() or nrow() within str() to see what functions return</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#str(ncol(df_event))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Example, object is atomic vector or list that is not a data frame (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>)) <span class="co"># atomic vector</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">list</span>(<span class="st">"apple"</span>, <span class="st">"orange"</span>), <span class="fu">list</span>(<span class="dv">2</span>, <span class="dv">3</span>)) <span class="co"># list</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-r-functions-to-describe-objects-dim" class="level3" data-number="1.1.7">
<h3 data-number="1.1.7" class="anchored" data-anchor-id="base-r-functions-to-describe-objects-dim"><span class="header-section-number">1.1.7</span> Base R functions to describe objects, <code>dim()</code></h3>
<p><code>dim()</code> function returns the dimensions of an object (e.g., number of rows and columns)</p>
<ul>
<li>syntax: <code>dim(x)</code></li>
<li>arguments
<ul>
<li><code>x</code>: a vector, array, data frame, or NULL</li>
</ul></li>
<li>value/return:
<ul>
<li>if object <code>x</code> is a data frame: <code>dim()</code> returns integer of length 2
<ul>
<li>first element = number of rows; second element = number of columns</li>
</ul></li>
<li>if object <code>x</code> is an atomic vector: <code>dim()</code> returns <code>NULL</code></li>
<li>if object <code>x</code> is a list but not a data frame: <code>dim()</code> returns <code>NULL</code></li>
</ul></li>
</ul>
<p>Example, object is a data frame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df_event) <span class="co"># shows number rows by columns</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18680    33</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">dim</span>(df_event)) <span class="co"># can wrap dim() within str() to see what functions return</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  int [1:2] 18680 33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Example, object is atomic vector or list that is not a data frame (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>)) <span class="co"># atomic vector</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">list</span>(<span class="st">"apple"</span>, <span class="st">"orange"</span>), <span class="fu">list</span>(<span class="dv">2</span>, <span class="dv">3</span>)) <span class="co"># list</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="variables-names" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="variables-names"><span class="header-section-number">1.2</span> Variables names</h2>
<section id="names-function" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="names-function"><span class="header-section-number">1.2.1</span> <code>names()</code> function</h3>
<p><code>names()</code> function gets or sets the names of elements of an object</p>
<ul>
<li>syntax:
<ul>
<li>get the names of an object: <code>names(x)</code></li>
<li>set the names of an object: <code>names(x) &lt;- value</code></li>
</ul></li>
<li>arguments (partial)
<ul>
<li><code>x</code>: an R object</li>
<li><code>value</code>: a character vector with same length as object <code>x</code> or <code>NULL</code></li>
</ul></li>
<li>value/return
<ul>
<li><code>names(x)</code> returns a character vector of length = <code>length(x)</code> in which each element is the name of the element of <code>x</code></li>
</ul></li>
</ul>
<p>Example, get names (of atomic vector)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">v1 =</span> <span class="dv">1</span>,<span class="at">v2 =</span> <span class="dv">2</span>, <span class="dv">3</span> ,<span class="at">v4 =</span> <span class="st">"hi!"</span>) <span class="co"># named atomic vector</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>a </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    v1    v2          v4 </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   "1"   "2"   "3" "hi!"</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(a)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(a)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "v1" "v2" ""   "v4"</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(a)) <span class="co"># investigate length of object names(a)</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">names</span>(a)) <span class="co"># investigate structure of object names(a)</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:4] "v1" "v2" "" "v4"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Example, set names (of atomic vector)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(a) <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># set names of vector a to NULL</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "1"   "2"   "3"   "hi!"</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(a)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(a) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"var1"</span>,<span class="st">"var2"</span>,<span class="st">"var3"</span>,<span class="st">"var4"</span>) <span class="co"># set names of vector a</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  var1  var2  var3  var4 </span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   "1"   "2"   "3" "hi!"</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(a)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "var1" "var2" "var3" "var4"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="applying-names-function-to-a-data-frame" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="applying-names-function-to-a-data-frame"><span class="header-section-number">1.2.2</span> Applying <code>names()</code> function to a data frame</h3>
<p>Recall that a data frame is an object where <strong>type</strong> is a <strong>list</strong> and each <strong>element</strong> is <strong>named</strong></p>
<ul>
<li>each element is a variable</li>
<li>each element name is a variable name</li>
</ul>
<p>Example (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_event)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Investigate the object <code>names(df_event)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">names</span>(df_event)) <span class="co"># type = character vector</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "character"</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">names</span>(df_event)) <span class="co"># length = number of variables in data frame</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 33</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">names</span>(df_event)) <span class="co"># structure of names(df_event)</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:33] "instnm" "univ_id" "instst" "pid" "event_date" "event_type" ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can even assign a new object based on <code>names(df_event)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>names_event <span class="ot">&lt;-</span> <span class="fu">names</span>(df_event)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(names_event) <span class="co"># type = character vector</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "character"</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(names_event) <span class="co"># length = number of variables in data frame</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 33</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(names_event) <span class="co"># structure of names(df_event)</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:33] "instnm" "univ_id" "instst" "pid" "event_date" "event_type" ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="variable-names" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="variable-names"><span class="header-section-number">1.2.3</span> Variable names</h3>
<p>Refer to specific named elements of an object using this syntax:</p>
<ul>
<li><code>object_name$element_name</code></li>
</ul>
<p>When object is data frame, refer to specific variables using this syntax:</p>
<ul>
<li><code>data_frame_name$varname</code></li>
<li><strong>This approach to isolating variables is very useful for investigating data</strong></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#df_event$instnm</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_event<span class="sc">$</span>instnm)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "character"</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_event<span class="sc">$</span>med_inc)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Data frames are lists with the following criteria:</p>
<ul>
<li>each element of the list is (usually) a vector; each element of a list is a variable</li>
<li>length of data frame = number of variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_event)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 33</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18680</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#str(df_event)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>each element of the list (i.e., variable) has the same length
<ul>
<li>Length of each variable is equal to number of observations in data frame</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_event<span class="sc">$</span>event_state)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "character"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_event<span class="sc">$</span>event_state)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18680</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event<span class="sc">$</span>event_state)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:18680] "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA" ...</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_event<span class="sc">$</span>med_inc)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_event<span class="sc">$</span>med_inc)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18680</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event<span class="sc">$</span>med_inc)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:18680] 71714 89122 70136 70136 71024 ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The object <code>df_school</code> has one obs per high school</p>
<ul>
<li>variable <code>visits_by_100751</code> shows number the of visits by University of Alabama to each high school</li>
<li>like all variables in a data frame, the var <code>visits_by_100751</code> is just a vector</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_school<span class="sc">$</span>visits_by_100751)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "integer"</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_school<span class="sc">$</span>visits_by_100751) <span class="co"># num elements in vector = num obs</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 21301</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_school<span class="sc">$</span>visits_by_100751)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  int [1:21301] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df_school<span class="sc">$</span>visits_by_100751) <span class="co"># sum of values of var across all obs</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3338</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We perform calculations on a variable like we would on any vector of same type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(v)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(v)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(v)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="view-and-print-data" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="view-and-print-data"><span class="header-section-number">1.3</span> View and print data</h2>
<section id="viewing-and-printing-data-frames" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="viewing-and-printing-data-frames"><span class="header-section-number">1.3.1</span> Viewing and printing, data frames</h3>
<p>Many ways to view/print a data frame object. Here are three ways:</p>
<ol type="1">
<li><p>Simply type the object name (output omitted)</p>
<ul>
<li>number of observations and rows printed depend on YAML header settings and on object “attributes” (attributes discussed in future week)</li>
</ul></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>df_event</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Use the <code>View()</code> function to view data in a browser</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(df_event)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li><code>head()</code> to show the first <em>n</em> rows. The default is 6 rows.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#?head</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">#head(df_event)</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_event, <span class="at">n=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="viewing-and-printing-data-frames-1" class="level3" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="viewing-and-printing-data-frames-1"><span class="header-section-number">1.3.2</span> Viewing and printing, data frames</h3>
<p><code>obj_name[&lt;rows&gt;,&lt;cols&gt;]</code> to print specific rows and columns of data frame</p>
<ul>
<li>particularly powerful when combined with sequences (e.g., <code>1:10</code>)</li>
</ul>
<p>Examples (output omitted):</p>
<ul>
<li>Print first five rows, all vars</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Print first five rows and first three columns</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Print first three columns of the 100th observation</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">100</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Print the 50th observation, all variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">50</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="viewing-and-printing-variables-within-data-frames" class="level3" data-number="1.3.3">
<h3 data-number="1.3.3" class="anchored" data-anchor-id="viewing-and-printing-variables-within-data-frames"><span class="header-section-number">1.3.3</span> Viewing and printing, variables within data frames</h3>
<p><strong>Recall that:</strong></p>
<ul>
<li><code>obj_name$var_name</code> print specifics elements (i.e., variables) of a data frame</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df_event<span class="sc">$</span>zip</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>each element (i.e., variable) of data frame is an <strong>atomic vector</strong> with <strong>length</strong> = number of observations</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_event<span class="sc">$</span>zip)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "character"</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_event<span class="sc">$</span>zip)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18680</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>each element of a variable is the value of the variable for one observation</li>
</ul>
<p><strong>Print specific elements (i.e., observations) of variable based on element position</strong></p>
<ul>
<li>syntax: <code>obj_name$var_name[&lt;element position&gt;]</code></li>
<li>vectors don’t have “rows” or “columns”; they just have elements</li>
<li>syntax combined with sequences (e.g., print first 10 observations)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df_event<span class="sc">$</span>event_state[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="co"># print obs 1-10 of variable "event_state"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA" "MA"</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>df_event<span class="sc">$</span>event_type[<span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>] <span class="co"># print obs 6-10 of variable "event_type"</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "private hs" "private hs" "public hs"  "private hs" "public hs"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Print specific elements (i.e., observations) of variable based on element position</strong></p>
<ul>
<li>syntax: <code>obj_name$var_name[&lt;element position&gt;]</code></li>
</ul>
<p>Example, print individual elements</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df_event<span class="sc">$</span>zip[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>] <span class="co"># print obs 1-5 of variable for event zip code</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "01002" "01007" "01020" "01020" "01027"</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>df_event<span class="sc">$</span>zip[<span class="dv">1</span>] <span class="co"># print obs 1 of variable for event zip code</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "01002"</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>df_event<span class="sc">$</span>zip[<span class="dv">5</span>] <span class="co"># print obs 5 of variable for event zip code</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "01027"</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>df_event<span class="sc">$</span>zip[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)] <span class="co"># print obs 5 of variable for event zip code</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "01002" "01020" "01027"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Print specific elements of multiple variables using combine function <code>c()</code></strong></p>
<ul>
<li>syntax: <code>c(obj_name$var1_name[&lt;element position&gt;], obj_name$var2_name[&lt;element position&gt;],...)</code></li>
<li>Example: print first five observations of variables <code>"event_state"</code> and <code>"event_type"</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(df_event<span class="sc">$</span>event_state[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],df_event<span class="sc">$</span>event_type[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "MA"        "MA"        "MA"        "MA"        "MA"        "public hs"</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "public hs" "public hs" "public hs" "public hs"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exercise" class="level3" data-number="1.3.4">
<h3 data-number="1.3.4" class="anchored" data-anchor-id="exercise"><span class="header-section-number">1.3.4</span> Exercise</h3>
<p>Printing exercise using the df_school data frame</p>
<ol type="1">
<li>Use the <code>obj_name[&lt;rows&gt;,&lt;cols&gt;]</code> syntax to print the first 5 rows and 3 columns of the <code>df_school</code> data frame</li>
<li>Use the <code>head()</code> function to print the first 4 observations</li>
<li>Use the <code>obj_name$var_name[1:10]</code> syntax to print the first 10 observations of a variable in the <code>df_school</code> data frame</li>
<li>Use combine() to print the first 3 observations of variables “school_type” &amp; “name”</li>
</ol>
<details>
<summary>
<strong>Solutions</strong>
</summary>
<ol type="1">
<li>Use the <code>obj_name[&lt;rows&gt;,&lt;cols&gt;]</code> syntax to print the first 5 rows and 3 columns of the <code>df_school</code> data frame</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>df_school[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state_code school_type      ncessch</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         AK      public 020000100208</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         AK      public 020000100211</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         AK      public 020000100212</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         AK      public 020000100213</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         AK      public 020000300216</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Use the <code>head()</code> function to print the first 4 observations</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_school, <span class="at">n=</span><span class="dv">4</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state_code school_type      ncessch                        name</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         AK      public 020000100208 Bethel Regional High School</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         AK      public 020000100211      Ayagina'ar Elitnaurvik</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         AK      public 020000100212         Kwigillingok School</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         AK      public 020000100213   Nelson Island Area School</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        address         city zip_code pct_white pct_black</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1006 Ron Edwards Memorial Dr       Bethel    99559   11.7764    0.5988</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2             106 Village Road   Kongiganak    99559    0.0000    0.0000</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3             108 Village Road Kwigillingok    99622    0.0000    0.0000</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4             118 Village Road  Toksook Bay    99637    0.0000    0.0000</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   pct_hispanic pct_asian pct_amerindian pct_other num_fr_lunch total_students</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1.5968     0.998        84.6307    0.3992          362            501</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       0.0000     0.000        99.4505    0.5495          182            182</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       0.0000     0.000       100.0000    0.0000          116            120</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4       0.0000     0.000       100.0000    0.0000          187            201</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   num_took_math num_prof_math num_took_rla num_prof_rla avgmedian_inc_2564</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           146         24.82          147        24.99            76160.0</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            17          1.70           17         1.70            76160.0</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            14          3.50           14         3.50                 NA</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            30          3.00           30         3.00            57656.5</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   visits_by_110635 visits_by_126614 visits_by_100751 inst_110635 inst_126614</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                0                0                0          CA          CO</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                0                0                0          CA          CO</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                0                0                0          CA          CO</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                0                0                0          CA          CO</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   inst_100751</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          AL</span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          AL</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          AL</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          AL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Use the <code>obj_name$var_name[1:10]</code> syntax to print the first 10 observations of a variable in the <code>df_school</code> data frame</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df_school<span class="sc">$</span>name[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "Bethel Regional High School" "Ayagina'ar Elitnaurvik"     </span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] "Kwigillingok School"         "Nelson Island Area School"  </span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] "Alakanuk School"             "Emmonak School"             </span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "Hooper Bay School"           "Ignatius Beans School"      </span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] "Pilot Station School"        "Kotlik School"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Use combine() to print the first 3 observations of variables “school_type” &amp; “name”</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(df_school<span class="sc">$</span>school_type[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],df_school<span class="sc">$</span>name[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "public"                      "public"                     </span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] "public"                      "Bethel Regional High School"</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] "Ayagina'ar Elitnaurvik"      "Kwigillingok School"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
</section>
<section id="missing-values" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="missing-values"><span class="header-section-number">1.4</span> Missing values</h2>
<section id="missing-values-1" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="missing-values-1"><span class="header-section-number">1.4.1</span> Missing values</h3>
<p>Missing values have the value <code>NA</code></p>
<ul>
<li><code>NA</code> is a special keyword, not the same as the character string <code>"NA"</code></li>
</ul>
<p>use <code>is.na()</code> function to determine if a value is missing</p>
<ul>
<li><code>is.na()</code> returns a logical vector</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="dv">5</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="cn">NA</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="st">"NA"</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">is.na</span>(<span class="st">"NA"</span>)) <span class="co"># example of a logical vector</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "logical"</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>nvector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">5</span>,<span class="cn">NA</span>)</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(nvector)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE FALSE  TRUE</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="fu">is.na</span>(nvector)) <span class="co"># example of a logical vector</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "logical"</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>svector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"e"</span>,<span class="st">"f"</span>,<span class="cn">NA</span>,<span class="st">"NA"</span>)</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(svector)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE FALSE  TRUE FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="missing-values-are-contagious" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="missing-values-are-contagious"><span class="header-section-number">1.4.2</span> Missing values are “contagious”</h3>
<p>What does “contagious” mean?</p>
<ul>
<li>operations involving a missing value will yield a missing value</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span><span class="sc">&gt;</span><span class="dv">5</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span><span class="sc">&gt;</span><span class="cn">NA</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">NA</span>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">==</span><span class="cn">NA</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">NA</span>)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  0  2  4 NA</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span><span class="sc">*</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">NA</span>)</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] NA NA NA NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="functions-and-missing-values-example-table" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="functions-and-missing-values-example-table"><span class="header-section-number">1.4.3</span> Functions and missing values example, <code>table()</code></h3>
<p><code>table()</code> function is useful for investigating categorical variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event<span class="sc">$</span>event_type)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:18680] "public hs" "public hs" "public hs" "public hs" "public hs" ...</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_event<span class="sc">$</span>event_type)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2yr college 4yr college       other  private hs   public hs </span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         951         531        2001        3774       11423</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By default <code>table()</code> ignores <code>NA</code> values</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#?table</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event<span class="sc">$</span>school_type_pri)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  int [1:18680] NA NA NA NA NA 1 1 NA 1 NA ...</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_event<span class="sc">$</span>school_type_pri)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1    2    5 </span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3765    8    1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>useNA</code> argument controls if table includes counts of <code>NA</code>s. Allowed values:</p>
<ul>
<li>never (“no”) [DEFAULT VALUE]</li>
<li>only if count is positive (“ifany”);</li>
<li>even for zero counts (“always”)”</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 18680</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df_event<span class="sc">$</span>school_type_pri, <span class="at">useNA=</span><span class="st">"always"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     1     2     5  &lt;NA&gt; </span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3765     8     1 14906</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Broader point: Most functions that create descriptive statistics have options about how to treat missing values`</p>
<ul>
<li>When investigating data, good practice to <em>always</em> show missing values</li>
</ul>
</section>
</section>
</section>
<section id="subsetting-using-subset-operators" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Subsetting using subset operators</h1>
<section id="subsetting-to-extract-elements" class="level3" data-number="2.0.1">
<h3 data-number="2.0.1" class="anchored" data-anchor-id="subsetting-to-extract-elements"><span class="header-section-number">2.0.1</span> Subsetting to Extract Elements</h3>
<p>“Subsetting” refers to isolating particular elements of an object</p>
<p>Subsetting operators can be used to select/exclude elements (e.g., variables, observations)</p>
<ul>
<li>there are three subsetting operators: <code>[]</code>, <code>$</code> , <code>[[]]</code></li>
<li>these operators function differently based on vector types (e.g, atomic vectors, lists, data frames)</li>
</ul>
</section>
<section id="wichham-refers-to-number-of-dimensions-in-r-objects" class="level3" data-number="2.0.2">
<h3 data-number="2.0.2" class="anchored" data-anchor-id="wichham-refers-to-number-of-dimensions-in-r-objects"><span class="header-section-number">2.0.2</span> Wichham refers to number of “dimensions” in R objects</h3>
<p>An atomic vector is a 1-dimensional object that contains n elements</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="fl">3.3</span>, <span class="fl">4.4</span>, <span class="fl">5.5</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:5] 1.1 2.2 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lists are multi-dimensional objects</p>
<ul>
<li>Contains n elements; each element may contain a 1-dimensional atomic vector or a multi-dimensional list. Below list contains 3 dimensions</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="fu">list</span>(<span class="st">"apple"</span>, <span class="st">"orange"</span>))</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:2] 1 2</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 2</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : chr "apple"</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : chr "orange"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Data frames are 2-dimensional lists</p>
<ul>
<li>each element is a variable (dimension=columns)</li>
<li>within each variable, each element is an observation (dimension=rows)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(df_school)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 26</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 21301</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subset-atomic-vectors-using" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="subset-atomic-vectors-using"><span class="header-section-number">2.1</span> Subset atomic vectors using []</h2>
<p><strong>“Subsetting” a vector refers to isolating particular elements of a vector</strong></p>
<ul>
<li>I sometimes refer to this as “accessing elements of a vector”</li>
<li>subsetting elements of a vector is similar to “filtering” rows of a data-frame</li>
<li><code>[]</code> is the subsetting function for vectors</li>
</ul>
<p>Six ways to subset an atomic vector using <code>[]</code></p>
<ol type="1">
<li>Using positive integers to return elements at specified positions</li>
<li>Using negative integers to exclude elements at specified positions</li>
<li>Using logicals to return elements where corresponding logical is <code>TRUE</code></li>
<li>Empty <code>[]</code> returns original vector (useful for dataframes)</li>
<li>Zero vector [0], useful for testing data</li>
<li>If vector is “named,” use character vectors to return elements with matching names</li>
</ol>
<section id="using-positive-integers-to-return-elements-at-specified-positions-subset-atomic-vectors-using" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="using-positive-integers-to-return-elements-at-specified-positions-subset-atomic-vectors-using"><span class="header-section-number">2.1.1</span> 1. Using positive integers to return elements at specified positions (subset atomic vectors using [])</h3>
<p>Create atomic vector <code>x</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="fl">3.3</span>, <span class="fl">4.4</span>, <span class="fl">5.5</span>))</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:5] 1.1 2.2 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>[]</code> is the subsetting function for vectors</p>
<ul>
<li>contents inside <code>[]</code> can refer to element number (also called “position”).
<ul>
<li>e.g., <code>[3]</code> refers to contents of 3rd element (or position 3)</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">5</span>] <span class="co">#return 5th element</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5.5</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)] <span class="co">#return 3rd and 1st element</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.3 1.1</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">4</span>)] <span class="co">#return 4th element, 4th element, and 4th element</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4.4 4.4 4.4</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Return 3rd through 5th element</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-negative-integers-to-exclude-elements-at-specified-positions-subset-atomic-vectors-using" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="using-negative-integers-to-exclude-elements-at-specified-positions-subset-atomic-vectors-using"><span class="header-section-number">2.1.2</span> 2. Using negative integers to exclude elements at specified positions (subset atomic vectors using [])</h3>
<p>Before excluding elements based on position, investigate object</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:5] 1.1 2.2 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use negative integers to exclude elements based on element position</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">1</span>] <span class="co"># exclude 1st element</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2.2 3.3 4.4 5.5</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>)] <span class="co"># 3rd and 1st element</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.3 1.1</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>)] <span class="co"># exclude 3rd and 1st element</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2.2 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-logicals-to-return-elements-where-corresponding-logical-is-true-subset-atomic-vectors-using" class="level3" data-number="2.1.3">
<h3 data-number="2.1.3" class="anchored" data-anchor-id="using-logicals-to-return-elements-where-corresponding-logical-is-true-subset-atomic-vectors-using"><span class="header-section-number">2.1.3</span> 3. Using logicals to return elements where corresponding logical is <code>TRUE</code> (subset atomic vectors using [])</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When using <code>x[y]</code> to subset <code>x</code>, good practice to have <code>length(x)==length(y)</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x) <span class="co"># length of vector x</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>)) <span class="co"># length of y</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x) <span class="sc">==</span> <span class="fu">length</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>)) <span class="co"># condition true</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">FALSE</span>,<span class="cn">TRUE</span>)]</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Recycling rules:</p>
<ul>
<li>in <code>x[y]</code>, if <code>x</code> is different length than <code>y</code>, R “recycles” length of shorter to match length of longer</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>))</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>)]</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 3.3 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that a missing value (<code>NA</code>) in the index always yields a missing value in the output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>, <span class="cn">TRUE</span>, <span class="cn">NA</span>)]</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1  NA 4.4  NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Return all elements of object <code>x</code> where element is greater than 3:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>x <span class="co"># print object X</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>x<span class="sc">&gt;</span><span class="dv">3</span> <span class="co"># for each element of X, print T/F whether element value &gt; 3</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE FALSE  TRUE  TRUE  TRUE</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x<span class="sc">&gt;</span><span class="dv">3</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  logi [1:5] FALSE FALSE TRUE TRUE TRUE</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>x[x<span class="sc">&gt;</span><span class="dv">3</span>] <span class="co"># prints only the values that had TRUE at that position</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>visits_by_100751</code> column shows how many visits the University of Alabama made to each school. Let’s subset this to only include 2 or more visits:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df_school<span class="sc">$</span>visits_by_100751[<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>]</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [75] 0 0 0 0 0 0 0 0 0 0 5 2 4 4 3 3 3 3 3 3 2 3 3 3 3 1</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>df_school<span class="sc">$</span>visits_by_100751[<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>]<span class="sc">&gt;</span><span class="dv">2</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [85]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [97]  TRUE  TRUE  TRUE FALSE</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>df_school<span class="sc">$</span>visits_by_100751[df_school<span class="sc">$</span>visits_by_100751<span class="sc">&gt;</span><span class="dv">2</span>]</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [1] 5 4 4 3 3 3 3 3 3 3 3 3 3 4 4 3 3 3 3 3 4 4 3 3 3 4 3 3 3 3 3 3 3 4 3 3 4</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38] 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 4 3 3 3 3 4 5 3 3 3 4 3 3 4 3 3 3 3</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [75] 3 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 5 4 6 5 3 5 5 5 3</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [112] 4 4 3 3 3 5 3 4 4 3 3 3 3 4 4 3 3 4 3 3 3 3 3 3 3 3 3 3 3 4 3 3 3 3 3 3 3</span></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [149] 3 3 3 3 4 3 3 3 3 3 3 3 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="empty-returns-original-vector-subset-atomic-vectors-using" class="level3" data-number="2.1.4">
<h3 data-number="2.1.4" class="anchored" data-anchor-id="empty-returns-original-vector-subset-atomic-vectors-using"><span class="header-section-number">2.1.4</span> 4. Empty <code>[]</code> returns original vector (subset atomic vectors using [])</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>x[]</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is useful for sub-setting data frames, as we will show below</p>
</section>
<section id="zero-vector-0-subset-atomic-vectors-using" class="level3" data-number="2.1.5">
<h3 data-number="2.1.5" class="anchored" data-anchor-id="zero-vector-0-subset-atomic-vectors-using"><span class="header-section-number">2.1.5</span> 5. Zero vector [0] (subset atomic vectors using [])</h3>
<p>Zero vector, <code>x[0]</code></p>
<ul>
<li>R interprets this as returning element 0</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">0</span>]</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; numeric(0)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wickham states:</p>
<ul>
<li>“This is not something you usually do on purpose, but it can be helpful for generating test data.”</li>
</ul>
</section>
<section id="if-vector-is-named-character-vectors-to-return-elements-with-matching-names-subset-atomic-vectors-using" class="level3" data-number="2.1.6">
<h3 data-number="2.1.6" class="anchored" data-anchor-id="if-vector-is-named-character-vectors-to-return-elements-with-matching-names-subset-atomic-vectors-using"><span class="header-section-number">2.1.6</span> 6. If vector is named, character vectors to return elements with matching names (subset atomic vectors using [])</h3>
<p>Create vector <code>y</code> that has values of vector <code>x</code> but each element is named</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>(y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a=</span><span class="fl">1.1</span>, <span class="at">b=</span><span class="fl">2.2</span>, <span class="at">c=</span><span class="fl">3.3</span>, <span class="at">d=</span><span class="fl">4.4</span>, <span class="at">e=</span><span class="fl">5.5</span>))</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   a   b   c   d   e </span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1.1 2.2 3.3 4.4 5.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Return elements of vector based on name of element</p>
<ul>
<li>enclose element names in single <code>''</code> or double <code>""</code> quotes</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">#show element named "a"</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>y[<span class="st">"a"</span>]</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   a </span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1.1</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co">#show elements "a", "b", and "d"</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>y[<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"d"</span> )]</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   a   b   d </span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1.1 2.2 4.4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="subsetting-listsdata-frames-using" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="subsetting-listsdata-frames-using"><span class="header-section-number">2.2</span> Subsetting lists/data frames using []</h2>
<p>Using <code>[]</code> operator to subset lists works the same as subsetting atomic vector</p>
<ul>
<li>Using <code>[]</code> with a list always returns a list</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>list_a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="dv">1</span>,<span class="dv">2</span>),<span class="dv">3</span>,<span class="st">"apple"</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_a)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 2</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : num 1</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : num 2</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num 3</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : chr "apple"</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="co">#create new list that consists of elements 3 and 1 of list_a</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>list_b <span class="ot">&lt;-</span> list_a[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>)]</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_b)</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : chr "apple"</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 2</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : num 1</span></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : num 2</span></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a><span class="co">#show elements 3 and 1 of object list_a</span></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a><span class="co">#str(list_a[c(3, 1)])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Recall that a data frame is just a particular kind of list</p>
<ul>
<li>each element = a column = a variable</li>
</ul>
<p>Using <code>[]</code> with a list always returns a list</p>
<ul>
<li>Using <code>[]</code> with a data frame always returns a data frame</li>
</ul>
<p>Two ways to use <code>[]</code> to extract elements of a data frame</p>
<ol type="1">
<li>use “single index” <code>df_name[&lt;columns&gt;]</code> to extract columns (variables) based on element position number (i.e., column number)</li>
<li>use “double index” <code>df_name[&lt;rows&gt;, &lt;columns&gt;]</code> to extact particular rows and columns of a data frame</li>
</ol>
<section id="subsetting-data-frames-using-to-extract-columns-variables-based-on-element-position" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="subsetting-data-frames-using-to-extract-columns-variables-based-on-element-position"><span class="header-section-number">2.2.1</span> Subsetting data frames using [] to extract columns (variables) based on element position</h3>
<p>Use “single index” <code>df_name[&lt;columns&gt;]</code> to extract columns (variables) based on element number (i.e., column number)</p>
<p>Examples [output omitted]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_event)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co">#extract elements 1 through 4 (elements=columns=variables)</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)]</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="co">#extract columns 13 and 7</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">c</span>(<span class="dv">13</span>,<span class="dv">7</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subsetting-data-frames-to-extract-columns-variables-and-rows-observations-based-on-positionality" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="subsetting-data-frames-to-extract-columns-variables-and-rows-observations-based-on-positionality"><span class="header-section-number">2.2.2</span> Subsetting Data Frames to extract columns (variables) and rows (observations) based on positionality</h3>
<p>use “double index” syntax <code>df_name[&lt;rows&gt;, &lt;columns&gt;]</code> to extact particular rows and columns of a data frame</p>
<ul>
<li>often combined with sequences (e.g., <code>1:10</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Return rows 1-3 and columns 1-4</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       instnm univ_id instst   pid</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 UM Amherst  166629     MA 57570</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 UM Amherst  166629     MA 56984</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 UM Amherst  166629     MA 57105</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Return rows 50-52 and columns 10 and 20</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">50</span><span class="sc">:</span><span class="dv">52</span>, <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>)]</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    event_state pct_tworaces_zip</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 50          MA           1.9831</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 51          MA           1.9831</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 52          MA           1.9831</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use “double index” syntax <code>df_name[&lt;rows&gt;, &lt;columns&gt;]</code> to extact particular rows and columns of a data frame</p>
<p>recall that empty <code>[]</code> returns original object (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#return original data frame</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>df_event[]</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co">#return specific rows and all columns (variables)</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, ]</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#return all rows and specific columns (variables)</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>df_event[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="use-to-extract-data-frame-columns-based-on-variable-names" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="use-to-extract-data-frame-columns-based-on-variable-names"><span class="header-section-number">2.2.3</span> Use [] to extract data frame columns based on variable names</h3>
<p>Selecting columns from a data frame by subsetting with <code>[]</code> and list of element names (i.e., variable names) enclose in quotes</p>
<p>“single index” approach extracts specific variables, all rows (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">c</span>(<span class="st">"instnm"</span>, <span class="st">"univ_id"</span>, <span class="st">"event_state"</span>)] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>“Double index” approach extracts specific variables and specific rows</p>
<ul>
<li>syntax <code>df_name[&lt;rows&gt;, &lt;columns&gt;]</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df_event[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="st">"instnm"</span>, <span class="st">"event_state"</span>, <span class="st">"event_type"</span>)] </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        instnm event_state event_type</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  UM Amherst          MA  public hs</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  UM Amherst          MA  public hs</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  UM Amherst          MA  public hs</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  UM Amherst          MA  public hs</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Stony Brook          MA  public hs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="student-exercises" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="student-exercises"><span class="header-section-number">2.2.4</span> Student exercises</h3>
<p>Use subsetting operators from base R in extracting columns (variables), observations:</p>
<ol type="1">
<li><p>Use both “single index” and “double index” in subsetting to create a new dataframe by extracting the columns <code>instnm</code>, <code>event_date</code>, <code>event_type</code> from the <code>df_event</code> data frame. And show what columns (variables) are in the newly created dataframe.</p></li>
<li><p>Use subsetting to return rows 1-5 of columns <code>state_code</code>, <code>name</code>, <code>address</code> from the <code>df_school</code> data frame.</p></li>
</ol>
<details>
<summary>
<strong>Solutions</strong>
</summary>
<p>Solution to 1</p>
<p><strong>base R</strong> using subsetting operators</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># single index</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>df_event_br <span class="ot">&lt;-</span> df_event[<span class="fu">c</span>(<span class="st">"instnm"</span>, <span class="st">"event_date"</span>, <span class="st">"event_type"</span>)]</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co">#double index</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>df_event_br <span class="ot">&lt;-</span> df_event[, <span class="fu">c</span>(<span class="st">"instnm"</span>, <span class="st">"event_date"</span>, <span class="st">"event_type"</span>)]</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_event_br)</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "instnm"     "event_date" "event_type"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Solution to 2</p>
<p><strong>base R</strong> using subsetting operators</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>df_school[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="st">"state_code"</span>, <span class="st">"name"</span>, <span class="st">"address"</span>)]</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state_code                        name                      address</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         AK Bethel Regional High School 1006 Ron Edwards Memorial Dr</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         AK      Ayagina'ar Elitnaurvik             106 Village Road</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         AK         Kwigillingok School             108 Village Road</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         AK   Nelson Island Area School             118 Village Road</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         AK             Alakanuk School                9 School Road</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
</section>
<section id="subsetting-listsdata-frames-using-and" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="subsetting-listsdata-frames-using-and"><span class="header-section-number">2.3</span> Subsetting lists/data frames using [[]] and $</h2>
<section id="subset-single-element-from-object-using-operator-atomic-vectors" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="subset-single-element-from-object-using-operator-atomic-vectors"><span class="header-section-number">2.3.1</span> Subset single element from object using [[]] operator, atomic vectors</h3>
<p>So far we have used <code>[]</code> to extract elements from an object</p>
<ul>
<li>Apply <code>[]</code> to atomic vector: returns atomic vector with elements you requested</li>
<li>Apply <code>[]</code> to list: returns list with elements you requested</li>
</ul>
<p><code>[[]]</code> also extract elements from an object</p>
<ul>
<li>Applying <code>[[]]</code> to atomic vector gives same result as <code>[]</code>; that is, an atomic vector with element you request</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="fl">3.3</span>, <span class="fl">4.4</span>, <span class="fl">5.5</span>))</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 2.2 3.3 4.4 5.5</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x[<span class="dv">3</span>]) </span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num 3.3</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x[[<span class="dv">3</span>]])</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num 3.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Caveat: when applying <code>[[]]</code> to atomic vector, you can only subset a single element</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)] <span class="co"># single bracket; this works</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.3 4.4</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">#x[[c(3,4)]] # double bracket; this won't work</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subsetting-lists-using-vs.-introduce-train-metaphor" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="subsetting-lists-using-vs.-introduce-train-metaphor"><span class="header-section-number">2.3.2</span> Subsetting lists using <code>[]</code> vs.&nbsp;<code>[[]]</code>, introduce “train metaphor”</h3>
<p>Applying <code>[[]]</code> to a list</p>
<ul>
<li>Understanding what <code>[]</code> vs.&nbsp;<code>[[]]</code> does to a list is very important but requires some explanation!</li>
</ul>
<p><em>Advanced R</em> <a href="https://adv-r.hadley.nz/subsetting.html#subset-single">chapter 4.3</a> by Wickham uses the “train metaphor” to explain a list vs.&nbsp;<strong>contents</strong> of a list and how this relates to <code>[]</code> vs.&nbsp;<code>[[]]</code></p>
<p>Below code chunk makes a list named <code>list_x</code> that contains 3 elements</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>list_x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"a"</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># create list object list_x</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_x)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : int [1:3] 1 2 3</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : chr "a"</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : int [1:3] 4 5 6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In our train metaphor, object <code>list_x</code> is a train that contains 3 carriages</p>
<p><a href="https://adv-r.hadley.nz/subsetting.html#subset-single"><img src="three_carriage_train.png" class="img-fluid"></a></p>
<p>list object <code>list_x</code> is a train that contains 3 carriages</p>
<div class="cell">
<pre><code>#&gt; Warning: package 'knitr' was built under R version 4.3.3</code></pre>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="three_carriage_train.png" class="img-fluid figure-img" style="width:45.0%"></p>
</figure>
</div>
</div>
</div>
<p>When we “subset a list” – that is, extract one or more elements from the list – we have two broad choices (image below)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="one_carriage_train_vs_contents.png" class="img-fluid figure-img" style="width:45.0%"></p>
</figure>
</div>
</div>
</div>
<ol type="1">
<li><p>Extracting elements using <code>[]</code> always returns a list, usually one with fewer elements</p>
<ul>
<li>you can think of this as a train with fewer carriages</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">#str(list_x)</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_x[<span class="dv">1</span>]) <span class="co"># returns a list</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 1</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : int [1:3] 1 2 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Extracting element using <code>[[]]</code> returns <strong><em>contents</em></strong> of particular carriage</p>
<ul>
<li>I say applying <code>[[]]</code> to a list or data frame returns a simpler object that moves up one level of hierarchy</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_x[[<span class="dv">1</span>]]) <span class="co"># returns an atomic vector</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  int [1:3] 1 2 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
</ol>
</section>
<section id="subset-lists-using-vs.-deepen-understanding-of" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="subset-lists-using-vs.-deepen-understanding-of"><span class="header-section-number">2.3.3</span> Subset lists using <code>[]</code> vs.&nbsp;<code>[[]]</code>, deepen understanding of <code>[]</code></h3>
<!-- Use train metaphor to deepen understanding of using `[]` to subset the list object `list_x` -->
<p>Rules about applying subset operator <code>[]</code> to a list</p>
<ul>
<li>Applying <code>[]</code> to a list always returns a list</li>
<li>Resulting list contains 1 or more elements depending on what typed inside <code>[]</code></li>
</ul>
<p>Here is a list object named <code>list_x</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>list_x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"a"</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is an image of a few “trains” that can be created by applying <code>[]</code> to <code>list_x</code> <!-- [![](smaller_trains.png)](https://adv-r.hadley.nz/subsetting.html#subset-single){height=50%} --></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="smaller_trains.png" class="img-fluid figure-img" style="width:45.0%"></p>
</figure>
</div>
</div>
</div>
<p>And here is code to create the “trains” shown in above image (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>list_x[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>list_x[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>list_x[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)]</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>list_x[<span class="dv">0</span>]</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>list_x[] <span class="co"># returns the original list; not shown in above train picture</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Rules about applying subset operator <code>[[]]</code> to a list</p>
<ul>
<li>Can apply <code>[[]]</code> to return the <strong>contents</strong> of a <strong>single element</strong> of a list</li>
</ul>
<p>Create list <code>list_x</code> and show “train” Image of applying <code>list_x[1]</code> vs.&nbsp;<code>list_x[[1]]</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>list_x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"a"</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="one_carriage_train_vs_contents.png" class="img-fluid figure-img" style="width:45.0%"></p>
</figure>
</div>
</div>
</div>
<p>Object created by <code>list_x[1]</code> is a list with one element (output omitted)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>list_x[<span class="dv">1</span>]</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_x[<span class="dv">1</span>])</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 1</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : int [1:3] 1 2 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Object created by <code>list_x[[1]]</code> is a vector with 3 elements (output omitted)</p>
<ul>
<li><code>list_x[[1]]</code> gives us “contents” of element 1</li>
<li>Since element 1 contains a numeric vector, object created by <code>list_x[[1]]</code> is a numeric vector</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>list_x[[<span class="dv">1</span>]]</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_x[[<span class="dv">1</span>]])</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  int [1:3] 1 2 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Rules about applying subset operator <code>[[]]</code> to a list</p>
<ul>
<li>Can apply <code>[[]]</code> to return the <strong>contents</strong> of a <strong>single element</strong> of a list</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>list_x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">"a"</span>, <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># create list list_x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We cannot use <code>[[]]</code> to subset multiple elements of a list (output omitted)</p>
<ul>
<li>e.g., we could write <code>list_x[[2]]</code> but not <code>list_x[[2:3]]</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>list_x[[<span class="fu">c</span>(<span class="dv">2</span>)]] <span class="co"># this works, subset element 2 using [[]]</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>list_x[[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]] <span class="co"># this doesn't work; subset element 2 and 3 using [[]]</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>list_x[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)] <span class="co"># this works; subset element 2 and 3 using []</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Like <code>[]</code>, can use <code>[[]]</code> to return contents of <strong>named</strong> elements specified using quotes</p>
<ul>
<li>syntax: <code>obj_name[["element_name"]]</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>list_x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">var1=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">var2=</span><span class="st">"a"</span>, <span class="at">var3=</span><span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># create list with named elements</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Subset list <code>list_x</code> using <code>[[]]</code> element names</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>list_x[[<span class="st">"var1"</span>]] <span class="co"># subset by element position: list_x[[1]]</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_x[[<span class="st">"var1"</span>]])</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  int [1:3] 1 2 3</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list_x[<span class="st">"var1"</span>]) <span class="co"># note: suggests var name is attribute of list, not atomic vector</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 1</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ var1: int [1:3] 1 2 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Can do same thing with data frames because data frames are lists (output omitted)</p>
<ul>
<li>e.g., <code>df_event[["zip"]]</code> returns contents of element named <code>"zip"</code></li>
<li>object created by <code>df_event[["zip"]]</code> is character vector of length = 18,680</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df_event[["zip"]] # this works but long output</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event[[<span class="st">"zip"</span>]]) <span class="co"># character vector of length 18,860</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_event[[<span class="st">"zip"</span>]])</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_event[[<span class="st">"zip"</span>]])</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event[<span class="st">"zip"</span>]) <span class="co"># by contrast, this is a dataframe w/ one variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="general-rules-of-applying-vs-to-nested-objects" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="general-rules-of-applying-vs-to-nested-objects"><span class="header-section-number">2.3.4</span> General rules of applying <code>[]</code> vs <code>[[]]</code> to (nested) objects</h3>
<p>What we just learned about applying <code>[]</code> vs <code>[[]]</code> to lists applies more generally to “nested objects”</p>
<ul>
<li>“nested objects” are objects with a hierarchical structure such that an element of an object contains another object</li>
</ul>
<p>General rules of applying <code>[]</code> vs.&nbsp;<code>[[]]</code> to nested objects</p>
<ul>
<li>subset any object <code>x</code> using <code>[]</code> will return object with same data structure as <code>x</code></li>
<li>subset any object <code>x</code> using <code>[[]]</code> will return an object thay may or may not have same data structure of <code>x</code>
<ul>
<li>if object <code>x</code> is not a nested object, then applying <code>[[]]</code> to a single element of <code>x</code> will return object with same data structure as <code>x</code></li>
<li>if object <code>x</code> has a nested data structure, then then applying <code>[[]]</code> to a single element of <code>x</code> will “move up one level of hierarchy” to extract the <strong>contents</strong> of an element within the object <code>x</code></li>
</ul></li>
</ul>
<p>When working w/ data frames, functions that calculate things expect to be working with atomic vectors (think <code>[[]]</code>) not lists (think <code>[]</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(df_event[[<span class="st">'med_inc'</span>]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 89089.28</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mean(df_event['med_inc'], na.rm = TRUE) # by contrast, this doesn't work</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event[<span class="st">'med_inc'</span>])</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    18680 obs. of  1 variable:</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ med_inc: num  71714 89122 70136 70136 71024 ...</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event[[<span class="st">'med_inc'</span>]])</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:18680] 71714 89122 70136 70136 71024 ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subset-listsdata-frames-using" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="subset-listsdata-frames-using"><span class="header-section-number">2.3.5</span> Subset lists/data frames using $</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>list_x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">var1=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">var2=</span><span class="st">"a"</span>, <span class="at">var3=</span><span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>obj_name$element_name</code> is shorthand operator for <code>obj_name[["element_name"]]</code></p>
<p>These three lines of code all give the same result</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>list_x[[<span class="dv">1</span>]]</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>list_x[[<span class="st">"var1"</span>]]</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>list_x<span class="sc">$</span>var1</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>df_name$var_name</code>: easiest way in base R to refer to variable in a data frame</p>
<ul>
<li>these two lines of code are equivalent</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event[[<span class="st">"zip"</span>]])</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:18680] "01002" "01007" "01020" "01020" "01027" "01027" "01027" ...</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_event<span class="sc">$</span>zip)</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:18680] "01002" "01007" "01020" "01020" "01027" "01027" "01027" ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>
<section id="appendix" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Appendix</h1>
<section id="subset-data-frames-by-combining-and" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="subset-data-frames-by-combining-and"><span class="header-section-number">3.1</span> Subset Data frames by combining [] and $</h2>
<p><strong>Motivation</strong></p>
<ul>
<li>When working with data frames we often want to isolate those observations that satisfy certain conditions</li>
<li>This is often referred to as “filtering”
<ul>
<li>We filter observations based on the values of one or more variables</li>
</ul></li>
<li>Perhaps you have seen “filtering” in Microsoft Excel
<ul>
<li>open some spreadsheet that contains variables (columns) and observations (rows)</li>
<li>click on <code>Data</code> &gt;&gt; <code>Filter</code> and then filter observations based on values of variable(s)</li>
</ul></li>
</ul>
<p>Filtering example using data frame <code>df_school</code></p>
<ul>
<li>Observations:
<ul>
<li>One observation per high school (public and private)</li>
</ul></li>
<li>Variables:
<ul>
<li>high school characteristics; number of off-campus recruiting visits from particular universities</li>
<li>NCES ID for UC Berkeley is <code>110635</code></li>
<li>variable <code>visits_by_110635</code> shows number of visits a high school received from UC Berkeley</li>
</ul></li>
</ul>
<p><strong>Task</strong>:</p>
<ul>
<li>Isolate obs where school received at least 1 visit from UC Berkeley</li>
</ul>
<p>General syntax: <code>df_name[df_name$var_name &lt;condition&gt;, ]</code></p>
<ul>
<li>where <code>&lt;condition&gt;</code> is something that evaluates to <code>TRUE</code> or <code>FALSE</code> for each element of the atomic vector (i.e., variable)</li>
<li>Note that syntax uses “double index” <code>df_name[&lt;rows&gt;, &lt;columns&gt;]</code> syntax
<ul>
<li>Therefore, the <code>&lt;condition&gt;</code> in above syntax is isolating <code>&lt;rows&gt;</code></li>
</ul></li>
<li><strong>Cannot</strong> use “single index” syntax <code>df_name[&lt;columns&gt;]</code></li>
</ul>
<p>Solution to task (output omitted)</p>
<ul>
<li>Note: below code filters observations but keeps all variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>df_school[df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="subset-data-frames-by-combining-and-decompose-syntax" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="subset-data-frames-by-combining-and-decompose-syntax"><span class="header-section-number">3.1.1</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, decompose syntax</h3>
<p><strong>Task</strong>: Isolate obs where school received at least 1 visit from UC Berkeley</p>
<ul>
<li>general syntax: <code>df_name[df_name$var_name &lt;condition&gt;, ]</code></li>
<li>solution: <code>df_school[df_school$visits_by_110635 &gt;= 1, ]</code></li>
</ul>
<p>Decomposing syntax <code>df_school[df_school$visits_by_110635 &gt;= 1, ]</code></p>
<ul>
<li><code>df_school$visits_by_110635 &gt;= 1</code>: returns a logical (<code>TRUE</code>/<code>FALSE</code>) atomic vector with length equal to number of obs in <code>df_school</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span>)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>df_school[df_school$visits_by_110635 &gt;= 1, ]</code>
<ul>
<li>uses “double index” <code>df_name[&lt;rows&gt;, &lt;columns&gt;]</code> syntax to extract rows, columns</li>
<li>rows: extract rows where <code>df_school$visits_by_110635 &gt;= 1</code> is <code>TRUE</code></li>
<li>columns: since <code>&lt;columns&gt;</code> is empty, extracts all columns</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><strong>key point</strong>: <code>df_name[df_name$var_name &lt;condition&gt;, ]</code> is “subset a vector approach #3”: “Using logicals to return elements where condition <code>TRUE</code>”</li>
<li>example using atomic vectors (output omitted)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="fl">3.3</span>, <span class="fl">4.4</span>, <span class="fl">5.5</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>x[x<span class="sc">&gt;</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subset-data-frames-by-combining-and-keep-desired-columns" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="subset-data-frames-by-combining-and-keep-desired-columns"><span class="header-section-number">3.1.2</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, keep desired columns</h3>
<ul>
<li><p>General syntax to filter desired observations (rows) and variables (columns) of data frame:</p></li>
<li><p><code>df_name[df_name$var_name &lt;condition&gt;, &lt;desired columns&gt;]</code></p></li>
</ul>
<p><strong>Tasks</strong> (output omitted)</p>
<ul>
<li>Extract observations where the high school received at least 1 visit from UC Berkeley and the first three columns</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>df_school[df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Extract observations where the high school received at least 1 visit from UC Berkeley and variables “state_code” “school_type” “name”</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>df_school[df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span>, <span class="fu">c</span>(<span class="st">"state_code"</span>,<span class="st">"school_type"</span>,<span class="st">"name"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subset-data-frames-by-combining-and-more-examples" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="subset-data-frames-by-combining-and-more-examples"><span class="header-section-number">3.1.3</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, more examples</h3>
<p>Syntax:</p>
<ul>
<li>filter based on one variable:
<ul>
<li><code>df_name[df_name$var_name &lt;condition&gt;, &lt;columns&gt;]</code></li>
</ul></li>
<li>Example syntax to filter based on two conditions being true
<ul>
<li><code>df_name[df_name$var_name &lt;condition&gt; &amp; df_name$var_name &lt;condition&gt;, &lt;columns&gt;]</code></li>
</ul></li>
</ul>
<p><strong>Pro tip:</strong></p>
<ul>
<li>wrap above syntax within <code>nrow()</code> function to count how many observations (rows) satisfy the condition (as opposed to printing all rows that satisfy condition)</li>
</ul>
<p><strong>Tasks</strong></p>
<ul>
<li>Count obs where high schools received at least 1 visit by Bama (100751) <strong>and</strong> at least one visit by Berkeley (110635)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school[df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>                 df_school<span class="sc">$</span>visits_by_100751 <span class="sc">&gt;=</span> <span class="dv">1</span>, ])</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 247</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Equivalently:</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="co"># nrow(df_school[df_school[["visits_by_110635"]] &gt;= 1 &amp; </span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                df_school[["visits_by_100751"]] &gt;= 1, ])</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Count obs where schools received 1+ visit by Bama <strong>or</strong> 1+ visit by Berkeley</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school[df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span> df_school<span class="sc">$</span>visits_by_100751 <span class="sc">&gt;=</span> <span class="dv">1</span>, ])</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2763</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="logical-operators-for-comparisons" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="logical-operators-for-comparisons"><span class="header-section-number">3.1.4</span> Logical operators for comparisons</h3>
<ul>
<li>Logical operators to isolate/filter observations of data frame</li>
</ul>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Symbol</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>==</code></td>
<td>Equal to</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>Not equal to</td>
</tr>
<tr class="odd">
<td><code>&gt;</code></td>
<td>greater than</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td><code>&lt;</code></td>
<td>less than</td>
</tr>
<tr class="even">
<td><code>&lt;=</code></td>
<td>less than or equal to</td>
</tr>
<tr class="odd">
<td><code>&amp;</code></td>
<td>AND</td>
</tr>
<tr class="even">
<td><code>|</code></td>
<td>OR</td>
</tr>
<tr class="odd">
<td><code>%in%</code></td>
<td>includes</td>
</tr>
</tbody>
</table>
<ul>
<li>Visualization of “Boolean” operators (e.g., AND, OR, AND NOT)</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="transform-logical.png" class="img-fluid figure-img" style="width:40.0%"></p>
<figcaption>“Boolean” operations, x=left circle, y=right circle, from Wichkam (2018)</figcaption>
</figure>
</div>
<p><strong>Example</strong>: Count the number of out-of-state high schools that UC Berkeley visited.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The `inst_110635` variable contains the home state of UC Berkeley</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(df_school<span class="sc">$</span>inst_110635)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "CA"</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for schools visited by UC Berkeley AND whose state is not "CA"</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school[df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>                 df_school<span class="sc">$</span>state_code <span class="sc">!=</span> df_school<span class="sc">$</span>inst_110635, ])</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 302</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p><strong>Example</strong>: Count the number of schools in the Northeast that received a visit from either UC Berkeley, U of Alabama, or CU Boulder.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vector containing states located in the Northeast region</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>northeast_states <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'CT'</span>, <span class="st">'ME'</span>, <span class="st">'MA'</span>, <span class="st">'NH'</span>, <span class="st">'RI'</span>, <span class="st">'VT'</span>, <span class="st">'NJ'</span>, <span class="st">'NY'</span>, <span class="st">'PA'</span>)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for schools in the Northeast AND visited by any of the 3 univs</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school[df_school<span class="sc">$</span>state_code <span class="sc">%in%</span> northeast_states <span class="sc">&amp;</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>                 (df_school<span class="sc">$</span>visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>                    df_school<span class="sc">$</span>visits_by_100751 <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">|</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>                    df_school<span class="sc">$</span>visits_by_126614 <span class="sc">&gt;=</span> <span class="dv">1</span>), ])</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 544</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subset-data-frames-by-combining-and-na-observations" class="level3" data-number="3.1.5">
<h3 data-number="3.1.5" class="anchored" data-anchor-id="subset-data-frames-by-combining-and-na-observations"><span class="header-section-number">3.1.5</span> Subset Data Frames by combining <code>[]</code> and <code>$</code>, <code>NA</code> Observations</h3>
<p>Filtering observations of data frame using <code>[]</code> combined with <code>$</code> is more complicated in the presence of missing values (<code>NA</code> values)</p>
<p>The below we will explain</p>
<ul>
<li>why it is more complicated</li>
<li>how to filter correctly when <code>NA</code>s are present</li>
</ul>
<p>When sub-setting via <code>[]</code> combined with <code>$</code>, result will include:</p>
<ul>
<li>rows where condition is <code>TRUE</code></li>
<li><strong>as well as</strong> rows with <code>NA</code> (missing) values for <code>&lt;condition&gt;</code>.</li>
</ul>
<p><strong>Task</strong> (using <code>df_event</code>, which has one obs per university, recruiting event)</p>
<ul>
<li>How many events at public HS with at least $50k median household income?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df_event<span class="sc">$</span>med_inc)) <span class="co"># number of observations (all events) with missing values for med_inc</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 470</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co">#num obs event_type=="public hs" and med_inc is missing</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> <span class="fu">is.na</span>(df_event<span class="sc">$</span>med_inc)<span class="sc">==</span><span class="dv">1</span> , ]) <span class="co"># note TRUE evaluates to 1</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 75</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="co">#num obs event_type=="public hs" &amp; med_inc is not NA &amp; med_inc &gt;= $50,000</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> <span class="fu">is.na</span>(df_event<span class="sc">$</span>med_inc)<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc<span class="sc">&gt;=</span><span class="dv">50000</span> , ])  <span class="co"># note FALSE evaluates to 0</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9941</span></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="co">#num obs event_type=="public hs" and med_inc &gt;= $50,000</span></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc<span class="sc">&gt;=</span><span class="dv">50000</span> , ])</span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10016</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To exclude rows where condition is <code>NA</code> if subset using <code>[]</code> combined w/ <code>$</code></p>
<ul>
<li>use <code>which()</code> to ask only for values where condition evaluates to <code>TRUE</code></li>
<li><code>which()</code> returns position numbers for elements where condition is <code>TRUE</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co">#?which</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>,<span class="cn">TRUE</span>)</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  TRUE FALSE    NA  TRUE</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>,<span class="cn">TRUE</span>))</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  logi [1:4] TRUE FALSE NA TRUE</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>,<span class="cn">FALSE</span>,<span class="cn">NA</span>,<span class="cn">TRUE</span>))</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Task: Count events at public HS with at least $50k median household income?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Base R, `[]` combined with `$`; without which()</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc<span class="sc">&gt;=</span><span class="dv">50000</span>, ])</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10016</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Base R, `[]` combined with `$`; with which()</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[<span class="fu">which</span>(df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc<span class="sc">&gt;=</span><span class="dv">50000</span>), ])</span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9941</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="student-exercises-1" class="level3" data-number="3.1.6">
<h3 data-number="3.1.6" class="anchored" data-anchor-id="student-exercises-1"><span class="header-section-number">3.1.6</span> Student Exercises</h3>
<p>Subsetting Data Frames with <code>[]</code> and <code>$</code>:</p>
<ol type="1">
<li><p>Show how many public high schools in California with at least 50% Latinx (hispanic in data) student enrollment from the dataframe df_school.</p></li>
<li><p>Show how many out-state events at public high schools with more than $30K median from the datframe df_event (do not forget to exclude missing values).</p></li>
</ol>
<details>
<summary>
<strong>Solutions</strong>
</summary>
<p>Solution to 1</p>
<p><strong>base R</strong> using [] and $</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>df_school_br1<span class="ot">&lt;-</span> df_school[df_school<span class="sc">$</span>school_type <span class="sc">==</span> <span class="st">"public"</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">&amp;</span> df_school<span class="sc">$</span>pct_hispanic <span class="sc">&gt;=</span> <span class="dv">50</span> </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">&amp;</span> df_school<span class="sc">$</span>state_code <span class="sc">==</span> <span class="st">"CA"</span>, ]</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school_br1)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 713</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Solution to 2:</p>
<p><strong>base R</strong> using [] and $</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use is.na to exclude NA</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> <span class="sc">&amp;</span> df_event<span class="sc">$</span>event_inst <span class="sc">==</span><span class="st">"Out-State"</span> </span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>              <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc <span class="sc">&gt;</span> <span class="dv">30000</span> <span class="sc">&amp;</span> <span class="fu">is.na</span>(df_event<span class="sc">$</span>med_inc) <span class="sc">==</span><span class="dv">0</span>, ])</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 7784</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="co"># use which to exclude NA</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[<span class="fu">which</span>(df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> <span class="sc">&amp;</span> df_event<span class="sc">$</span>event_inst <span class="sc">==</span><span class="st">"Out-State"</span> </span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>              <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc <span class="sc">&gt;</span> <span class="dv">30000</span> ), ])</span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 7784</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
</section>
<section id="subset-using-subset-function" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="subset-using-subset-function"><span class="header-section-number">3.2</span> Subset using subset() function</h2>
<p>The <code>subset()</code> is a base R function to “filter” observations from some object <code>x</code></p>
<ul>
<li>object <code>x</code> can be a matrix, data frame, list</li>
<li><code>subset()</code> automatically excludes elements/rows with <code>NA</code> for condition</li>
<li>Can also use <code>subset()</code> to select variables</li>
<li>what <code>subset()</code> function returns:
<ul>
<li>“An object similar to x contain just the selected rows and columns (for a matrix or data frame)”</li>
</ul></li>
<li><code>subset()</code> can be combined with:
<ul>
<li>assignment (<code>&lt;-</code>) to create new objects</li>
<li><code>nrow()</code> to count number of observations that satisfy criteria</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>?subset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Syntax [when object is data frame]: <strong>subset(x, subset, select, drop = FALSE)</strong></p>
<ul>
<li><code>x</code> is object to be subset</li>
<li><code>subset</code> is the logical expression(s) (evaluates to <code>TRUE/FALSE</code>) indicating elements (rows) to keep</li>
<li><code>select</code> indicates columns to select from data frame (if argument is not used default will keep all columns)</li>
<li><code>drop</code> to preserve original <strong>dimensions</strong> [SKIP]</li>
</ul>
<section id="subset-function-examples" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="subset-function-examples"><span class="header-section-number">3.2.1</span> Subset function, examples</h3>
<p>Recall the previous example where we count events at public HS with at least $50k median household income.</p>
<ul>
<li><em>Note</em>. <code>subset()</code> automatically excludes rows where condition is <code>NA</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Base R, `[]` combined with `$`, without which(); includes `NA`</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>              <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc<span class="sc">&gt;=</span><span class="dv">50000</span>, ]) </span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10016</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Base R, `[]` combined with `$`, with which(); excludes `NA`</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_event[<span class="fu">which</span>(df_event<span class="sc">$</span>event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>                    <span class="sc">&amp;</span> df_event<span class="sc">$</span>med_inc<span class="sc">&gt;=</span><span class="dv">50000</span>), ])</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9941</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Base R, `subset()`; excludes `NA`</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(df_event, event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>            <span class="sc">&amp;</span> med_inc<span class="sc">&gt;=</span><span class="dv">50000</span>))</span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9941</span></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Base R, `subset()`; excludes `NA`; explicitly name arguments of subset()</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(<span class="at">x =</span> df_event, <span class="at">subset =</span> event_type <span class="sc">==</span> <span class="st">"public hs"</span> </span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a>            <span class="sc">&amp;</span> med_inc<span class="sc">&gt;=</span><span class="dv">50000</span>))</span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9941</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using <code>df_school</code>, show all public high schools that are at least 50% Latinx (var=<code>pct_hispanic</code>) student enrollment in California</p>
<ul>
<li>Using base R, <code>subset()</code> [output omitted]</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co">#public high schools with at least 50% Latinx student enrollment </span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(<span class="at">x=</span> df_school, <span class="at">subset =</span> school_type <span class="sc">==</span> <span class="st">"public"</span> <span class="sc">&amp;</span> pct_hispanic <span class="sc">&gt;=</span> <span class="dv">50</span> </span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>     <span class="sc">&amp;</span> state_code <span class="sc">==</span> <span class="st">"CA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Can wrap <code>subset()</code> within <code>nrow()</code> to count number of observations that satisfy criteria</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(df_school, school_type <span class="sc">==</span> <span class="st">"public"</span> <span class="sc">&amp;</span> pct_hispanic <span class="sc">&gt;=</span> <span class="dv">50</span> </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>     <span class="sc">&amp;</span> state_code <span class="sc">==</span> <span class="st">"CA"</span>))</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 713</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that <code>subset()</code> identify the number of observations for which the condition is <code>TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(<span class="at">x =</span> df_school, <span class="at">subset =</span> <span class="cn">TRUE</span>))</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 21301</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(<span class="at">x =</span> df_school, <span class="at">subset =</span> <span class="cn">FALSE</span>))</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Count all CA public high schools that are at least 50% Latinx and received at least 1 visit from UC Berkeley (var=<code>visits_by_110635</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(df_school, school_type <span class="sc">==</span> <span class="st">"public"</span> <span class="sc">&amp;</span> pct_hispanic <span class="sc">&gt;=</span> <span class="dv">50</span> </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> state_code <span class="sc">==</span> <span class="st">"CA"</span> <span class="sc">&amp;</span> visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span>))</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>subset()</code> can also use <code>%in%</code> operator, which is more efficient version of <strong>OR</strong> operator <code>|</code></p>
<ul>
<li>Count number of schools from MA, ME, or VT that received at least one visit from University of Alabama (var=<code>visits_by_100751</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(df_school, state_code <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"MA"</span>,<span class="st">"ME"</span>,<span class="st">"VT"</span>) </span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> visits_by_100751 <span class="sc">&gt;=</span> <span class="dv">1</span>))</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 108</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use the <code>select</code> argument within <code>subset()</code> to keep selected variables</p>
<ul>
<li>syntax: <code>select = c(var_name1,var_name2,...,var_name_n)</code></li>
</ul>
<p>Subset all CA public high schools that are at least 50% Latinx <strong>AND</strong> only keep variables <code>name</code> and <code>address</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(<span class="at">x =</span> df_school, <span class="at">subset =</span> school_type <span class="sc">==</span> <span class="st">"public"</span> <span class="sc">&amp;</span> pct_hispanic <span class="sc">&gt;=</span> <span class="dv">50</span> </span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>             <span class="sc">&amp;</span> state_code <span class="sc">==</span> <span class="st">"CA"</span>, <span class="at">select =</span> <span class="fu">c</span>(name, address)))</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 713</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Combine <code>subset()</code> with assignment (<code>&lt;-</code>) to create a new data frame</p>
<p>Create a new date frame of all CA public high schools that are at least 50% Latinx <strong>AND</strong> only keep variables <code>name</code> and <code>address</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>df_school_v2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(df_school, school_type <span class="sc">==</span> <span class="st">"public"</span> <span class="sc">&amp;</span> pct_hispanic <span class="sc">&gt;=</span> <span class="dv">50</span> </span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> state_code <span class="sc">==</span> <span class="st">"CA"</span>, <span class="at">select =</span> <span class="fu">c</span>(name, address))</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_school_v2, <span class="at">n=</span><span class="dv">5</span>)</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                       name               address</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1254           Tustin High   1171 El Camino Real</span></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1301     Bell Gardens High         6119 Agra St.</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1309        Santa Ana High         520 W. Walnut</span></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1332           Warren High     8141 De Palma St.</span></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1336 Hollywood Senior High 1521 N. Highland Ave.</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school_v2)</span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 713</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="student-exercises-2" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="student-exercises-2"><span class="header-section-number">3.2.2</span> Student Exercises</h3>
<p>Using <code>subset()</code> from base R:</p>
<ol type="1">
<li><p>Create a new dataframe by extracting the columns <code>instnm</code>, <code>event_date</code>, <code>event_type</code> from <code>df_event</code> data frame. And show what columns (variables) are in the newly created dataframe.</p></li>
<li><p>Create a new dataframe from the <code>df_school</code> data frame that includes out-of-state public high schools with 50%+ Latinx student enrollment that received at least one visit by the University of California Berkeley (var= visits_by_110635). And count the number of observations.</p></li>
<li><p>Count the number of public schools from CA, FL or MA that received one or two visits from UC Berkeley from the <code>df_school</code> data frame.</p></li>
<li><p>Subset all public out-of-state high schools visited by University of California Berkeley that enroll at least 50% Black students, and only keep variables <code>state_code</code>, <code>name</code> and <code>zip_code</code>.</p></li>
</ol>
<details>
<summary>
<strong>Solutions</strong>
</summary>
<p>Solution to 1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>df_event_br <span class="ot">&lt;-</span> <span class="fu">subset</span>(df_event, <span class="at">select=</span><span class="fu">c</span>(instnm, event_date, event_type))</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_event_br)</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "instnm"     "event_date" "event_type"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Solution to 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>df_school_br <span class="ot">&lt;-</span> <span class="fu">subset</span>(df_school, state_code <span class="sc">!=</span> <span class="st">"CA"</span> <span class="sc">&amp;</span> school_type <span class="sc">==</span> <span class="st">"public"</span> </span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>                        <span class="sc">&amp;</span> pct_hispanic <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">&amp;</span> visits_by_110635 <span class="sc">&gt;=</span><span class="dv">1</span> )</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(df_school_br)</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Solution to 3</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(<span class="fu">subset</span>(df_school, state_code <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"CA"</span>, <span class="st">"FL"</span>, <span class="st">"MA"</span>)  </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>             <span class="sc">&amp;</span> school_type <span class="sc">==</span> <span class="st">"public"</span> <span class="sc">&amp;</span> visits_by_110635 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>) ))</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 246</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Solution to 4</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df_school, school_type <span class="sc">==</span> <span class="st">"public"</span> <span class="sc">&amp;</span> state_code <span class="sc">!=</span> <span class="st">"CA"</span> </span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>       <span class="sc">&amp;</span> visits_by_110635 <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> pct_black <span class="sc">&gt;=</span> <span class="dv">50</span>, </span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">select =</span> <span class="fu">c</span>(state_code, name, zip_code))</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       state_code                                name zip_code</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4523          GA                   Grady High School    30309</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8519          MD             Frederick Douglass High    20772</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9666          MN                     DOWNTOWN CAMPUS    55403</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10681         MS                  MURRAH HIGH SCHOOL    39202</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14569         OH              Shaker Hts High School    44120</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14632         OH       Cleveland Heights High School    44118</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17142         SC                  Spring Valley High    29229</span></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17143         SC             Richland Northeast High    29223</span></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17623         TN           Soulsville Charter School    38106</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17624         TN KIPP Memphis Collegiate High School    38108</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
</section>
<section id="creating-variables" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="creating-variables"><span class="header-section-number">3.3</span> Creating variables</h2>
<section id="create-new-data-frame-based-on-df_school_all" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="create-new-data-frame-based-on-df_school_all"><span class="header-section-number">3.3.1</span> Create new data frame based on <code>df_school_all</code></h3>
<p>Data frame <code>df_school_all</code> has one obs per US high school and then variables identifying number of visits by particular universities</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/ozanj/rclass/raw/master/data/recruiting/recruit_school_allvars.RData"</span>))</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_school_all)</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "state_code"         "school_type"        "ncessch"           </span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] "name"               "address"            "city"              </span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "zip_code"           "pct_white"          "pct_black"         </span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] "pct_hispanic"       "pct_asian"          "pct_amerindian"    </span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] "pct_other"          "num_fr_lunch"       "total_students"    </span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] "num_took_math"      "num_prof_math"      "num_took_rla"      </span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19] "num_prof_rla"       "avgmedian_inc_2564" "latitude"          </span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [22] "longitude"          "visits_by_196097"   "visits_by_186380"  </span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] "visits_by_215293"   "visits_by_201885"   "visits_by_181464"  </span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [28] "visits_by_139959"   "visits_by_218663"   "visits_by_100751"  </span></span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [31] "visits_by_199193"   "visits_by_110635"   "visits_by_110653"  </span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [34] "visits_by_126614"   "visits_by_155317"   "visits_by_106397"  </span></span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [37] "visits_by_149222"   "visits_by_166629"   "total_visits"      </span></span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [40] "inst_196097"        "inst_186380"        "inst_215293"       </span></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [43] "inst_201885"        "inst_181464"        "inst_139959"       </span></span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [46] "inst_218663"        "inst_100751"        "inst_199193"       </span></span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [49] "inst_110635"        "inst_110653"        "inst_126614"       </span></span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [52] "inst_155317"        "inst_106397"        "inst_149222"       </span></span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [55] "inst_166629"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create new version of data frame, called <code>school_v2</code>, which we’ll use to introduce how to create new variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># below code use tidyverse functions and pipe operator</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ dplyr     1.1.4     ✔ readr     2.1.5</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ forcats   1.0.0     ✔ stringr   1.5.1</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ ggplot2   3.4.3     ✔ tibble    3.2.1</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ lubridate 1.9.3     ✔ tidyr     1.3.1</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✔ purrr     1.0.2     </span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</span></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>school_v2 <span class="ot">&lt;-</span> df_school_all <span class="sc">%&gt;%</span> </span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">"inst_"</span>)) <span class="sc">%&gt;%</span> <span class="co"># remove vars that start with "inst_"</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>( <span class="co"># rename selected variables</span></span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_berkeley =</span> visits_by_110635,</span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_boulder =</span> visits_by_126614,</span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_bama =</span> visits_by_100751,</span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_stonybrook =</span> visits_by_196097,</span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_rutgers =</span> visits_by_186380,</span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_pitt =</span> visits_by_215293,</span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_cinci =</span> visits_by_201885,</span>
<span id="cb122-22"><a href="#cb122-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_nebraska =</span> visits_by_181464,</span>
<span id="cb122-23"><a href="#cb122-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_georgia =</span> visits_by_139959,</span>
<span id="cb122-24"><a href="#cb122-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_scarolina =</span> visits_by_218663,</span>
<span id="cb122-25"><a href="#cb122-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_ncstate =</span> visits_by_199193,</span>
<span id="cb122-26"><a href="#cb122-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_irvine =</span> visits_by_110653,</span>
<span id="cb122-27"><a href="#cb122-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_kansas =</span> visits_by_155317,</span>
<span id="cb122-28"><a href="#cb122-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_arkansas =</span> visits_by_106397,</span>
<span id="cb122-29"><a href="#cb122-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_sillinois =</span> visits_by_149222,</span>
<span id="cb122-30"><a href="#cb122-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">visits_by_umass =</span> visits_by_166629,</span>
<span id="cb122-31"><a href="#cb122-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_took_read =</span> num_took_rla,</span>
<span id="cb122-32"><a href="#cb122-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_prof_read =</span> num_prof_rla,</span>
<span id="cb122-33"><a href="#cb122-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">med_inc =</span> avgmedian_inc_2564</span>
<span id="cb122-34"><a href="#cb122-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb122-35"><a href="#cb122-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-36"><a href="#cb122-36" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(school_v2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-r-approach-to-creating-new-variables" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="base-r-approach-to-creating-new-variables"><span class="header-section-number">3.3.2</span> Base R approach to creating new variables</h3>
<p>Create new variables using assignment operator <code>&lt;-</code> and subsetting operators <code>[]</code> and <code>$</code> to create new variables and set conditions of the input variables</p>
<p>Pseudo syntax: <code>df$newvar &lt;- ...</code></p>
<ul>
<li>where <code>...</code> argument is expression(s)/calculation(s) used to create new variables
<ul>
<li>expressions can include subsetting operators and/or other base R functions</li>
</ul></li>
</ul>
<p><strong>Task</strong>: Create measure of percent of students on free-reduced lunch</p>
<p><strong>base R approach</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>school_v2_temp<span class="ot">&lt;-</span> school_v2 <span class="co">#create copy of dataset; not necessary</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>school_v2_temp<span class="sc">$</span>pct_fr_lunch <span class="ot">&lt;-</span> </span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>   school_v2_temp<span class="sc">$</span>num_fr_lunch<span class="sc">/</span>school_v2_temp<span class="sc">$</span>total_students</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="co">#investigate variable you created</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(school_v2_temp<span class="sc">$</span>pct_fr_lunch)</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:21301] 0.723 1 0.967 0.93 1 ...</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>school_v2_temp<span class="sc">$</span>pct_fr_lunch[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>] <span class="co"># print first 5 obs</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.7225549 1.0000000 0.9666667 0.9303483 1.0000000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>tidyverse approach (with pipes)</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>school_v2_temp <span class="ot">&lt;-</span> school_v2 <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_fr_lunch =</span> num_fr_lunch<span class="sc">/</span>total_students) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If creating new variable based on the condition/values of input variables, basically the tidyverse equivalent of <code>mutate()</code> <strong>with</strong> <code>if_else()</code> or <code>recode()</code></p>
<ul>
<li>Pseudo syntax: <code>df$newvar[logical condition]&lt;- new value</code></li>
<li><code>logical condition</code>: a condition that evaluates to <code>TRUE</code> or <code>FALSE</code></li>
</ul>
<p><strong>Task</strong>: Create 0/1 indicator if school has median income greater than $100k</p>
<p><strong>tidyverse approach (using pipes)</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>school_v2_temp <span class="sc">%&gt;%</span> <span class="fu">select</span>(med_inc) <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">inc_gt_100k=</span> <span class="fu">if_else</span>(med_inc<span class="sc">&gt;</span><span class="dv">100000</span>,<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(inc_gt_100k) <span class="co"># note how NA values of med_inc treated</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   inc_gt_100k     n</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           0 18632</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           1  2045</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA   624</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Base R approach</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>school_v2_temp<span class="sc">$</span>inc_gt_100k<span class="ot">&lt;-</span><span class="cn">NA</span> <span class="co">#initialize an empty column with NAs </span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>                              <span class="co"># otherwise you'll get warning</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>school_v2_temp<span class="sc">$</span>inc_gt_100k[school_v2_temp<span class="sc">$</span>med_inc<span class="sc">&gt;</span><span class="dv">100000</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>school_v2_temp<span class="sc">$</span>inc_gt_100k[school_v2_temp<span class="sc">$</span>med_inc<span class="sc">&lt;=</span><span class="dv">100000</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(school_v2_temp, inc_gt_100k)</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   inc_gt_100k     n</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           0 18632</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           1  2045</span></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA   624</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Task</strong>: Using data frame <code>wwlist</code> and input vars <code>state</code> and <code>firstgen</code>, create a 4-category var with following categories:</p>
<ul>
<li>“instate_firstgen”; “instate_nonfirstgen”; “outstate_firstgen”; “outstate_nonfirstgen”</li>
</ul>
<p><strong>tidyverse approach (using pipes)</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://github.com/ozanj/rclass/raw/master/data/prospect_list/wwlist_merged.RData"</span>))</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>wwlist_temp <span class="ot">&lt;-</span> wwlist <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state_gen =</span> <span class="fu">case_when</span>(</span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">==</span> <span class="st">"WA"</span> <span class="sc">&amp;</span> firstgen <span class="sc">==</span><span class="st">"Y"</span> <span class="sc">~</span> <span class="st">"instate_firstgen"</span>,</span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">==</span> <span class="st">"WA"</span> <span class="sc">&amp;</span> firstgen <span class="sc">==</span><span class="st">"N"</span> <span class="sc">~</span> <span class="st">"instate_nonfirstgen"</span>,</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">!=</span> <span class="st">"WA"</span> <span class="sc">&amp;</span> firstgen <span class="sc">==</span><span class="st">"Y"</span> <span class="sc">~</span> <span class="st">"outstate_firstgen"</span>,</span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>    state <span class="sc">!=</span> <span class="st">"WA"</span> <span class="sc">&amp;</span> firstgen <span class="sc">==</span><span class="st">"N"</span> <span class="sc">~</span> <span class="st">"outstate_nonfirstgen"</span>)</span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(wwlist_temp<span class="sc">$</span>state_gen)</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:268396] NA "instate_nonfirstgen" "instate_nonfirstgen" ...</span></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>wwlist_temp <span class="sc">%&gt;%</span> <span class="fu">count</span>(state_gen)</span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state_gen                 n</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                 &lt;int&gt;</span></span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 instate_firstgen      32428</span></span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 instate_nonfirstgen   58646</span></span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 outstate_firstgen     32606</span></span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 outstate_nonfirstgen 134616</span></span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 &lt;NA&gt;                  10100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Task</strong>: Using <code>wwlist</code> and input vars <code>state</code> and <code>firstgen</code>, create a 4-category var</p>
<p><strong>base R approach</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>wwlist_temp <span class="ot">&lt;-</span> wwlist </span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>wwlist_temp<span class="sc">$</span>state_gen <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>wwlist_temp<span class="sc">$</span>state_gen[wwlist_temp<span class="sc">$</span>state <span class="sc">==</span> <span class="st">"WA"</span> </span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> wwlist_temp<span class="sc">$</span>firstgen <span class="sc">==</span><span class="st">"Y"</span>] <span class="ot">&lt;-</span> <span class="st">"instate_firstgen"</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>wwlist_temp<span class="sc">$</span>state_gen[wwlist_temp<span class="sc">$</span>state <span class="sc">==</span> <span class="st">"WA"</span> </span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> wwlist_temp<span class="sc">$</span>firstgen <span class="sc">==</span><span class="st">"N"</span>] <span class="ot">&lt;-</span> <span class="st">"instate_nonfirstgen"</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>wwlist_temp<span class="sc">$</span>state_gen[wwlist_temp<span class="sc">$</span>state <span class="sc">!=</span> <span class="st">"WA"</span> </span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> wwlist_temp<span class="sc">$</span>firstgen <span class="sc">==</span><span class="st">"Y"</span>] <span class="ot">&lt;-</span> <span class="st">"outstate_firstgen"</span></span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>wwlist_temp<span class="sc">$</span>state_gen[wwlist_temp<span class="sc">$</span>state <span class="sc">!=</span> <span class="st">"WA"</span> </span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&amp;</span> wwlist_temp<span class="sc">$</span>firstgen <span class="sc">==</span><span class="st">"N"</span>] <span class="ot">&lt;-</span> <span class="st">"outstate_nonfirstgen"</span></span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(wwlist_temp<span class="sc">$</span>state_gen)</span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:268396] NA "instate_nonfirstgen" "instate_nonfirstgen" ...</span></span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(wwlist_temp, state_gen)</span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 2</span></span>
<span id="cb128-17"><a href="#cb128-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   state_gen                 n</span></span>
<span id="cb128-18"><a href="#cb128-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                 &lt;int&gt;</span></span>
<span id="cb128-19"><a href="#cb128-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 instate_firstgen      32428</span></span>
<span id="cb128-20"><a href="#cb128-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 instate_nonfirstgen   58646</span></span>
<span id="cb128-21"><a href="#cb128-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 outstate_firstgen     32606</span></span>
<span id="cb128-22"><a href="#cb128-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 outstate_nonfirstgen 134616</span></span>
<span id="cb128-23"><a href="#cb128-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 &lt;NA&gt;                  10100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="sorting-data" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="sorting-data"><span class="header-section-number">3.4</span> Sorting data</h2>
<section id="base-r-sort-for-vectors" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="base-r-sort-for-vectors"><span class="header-section-number">3.4.1</span> Base R <code>sort()</code> for vectors</h3>
<p><code>sort()</code> is a base R function that sorts vectors</p>
<p>Syntax: <code>sort(x, decreasing=FALSE, ...)</code></p>
<ul>
<li>where x is object being sorted</li>
<li>By default it sorts in ascending order (low to high)</li>
<li>Need to set decreasing argument to <code>TRUE</code> to sort from high to low</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">#?sort()</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">31</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">25</span>)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(x)</span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  2  5  8 25 31</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(x, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 31 25  8  5  2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="base-r-order-for-dataframes" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="base-r-order-for-dataframes"><span class="header-section-number">3.4.2</span> Base R <code>order()</code> for dataframes</h3>
<p><code>order()</code> is a base R function that sorts vectors</p>
<ul>
<li>Syntax: <code>order(..., na.last = TRUE, decreasing = FALSE)</code></li>
<li>where <code>...</code> are variable(s) to sort by</li>
<li>By default it sorts in ascending order (low to high)</li>
<li>Need to set decreasing argument to <code>TRUE</code> to sort from high to low</li>
</ul>
<p>Descending argument only works when we want either one (and only) variable descending or all variables descending (when sorting by multiple vars)</p>
<ul>
<li>use <code>-</code> when you want to indicate which variables are descending while using the default ascending sorting</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">order</span>(df_event<span class="sc">$</span>event_date), ] </span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">order</span>(df_event<span class="sc">$</span>event_date, df_event<span class="sc">$</span>total_12), ]</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="co">#sort descending via argument</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">order</span>(df_event<span class="sc">$</span>event_date, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ] </span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">order</span>(df_event<span class="sc">$</span>event_date, df_event<span class="sc">$</span>total_12, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ] </span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a><span class="co">#sorting by both ascending and descending variables</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>df_event[<span class="fu">order</span>(df_event<span class="sc">$</span>event_date, <span class="sc">-</span>df_event<span class="sc">$</span>total_12), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="example-sorting" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="example-sorting"><span class="header-section-number">3.4.3</span> Example, sorting</h3>
<ul>
<li>Create a new dataframe from df_events that sorts by ascending by <code>event_date</code>, ascending <code>event_state</code>, and descending <code>pop_total</code>.</li>
</ul>
<p><strong>base R</strong> using <code>order()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>df_event_br1 <span class="ot">&lt;-</span> df_event[<span class="fu">order</span>(df_event<span class="sc">$</span>event_date, df_event<span class="sc">$</span>event_state, </span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>                               <span class="sc">-</span>df_event<span class="sc">$</span>pop_total), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>