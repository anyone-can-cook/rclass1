<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="">

<title>Strings &amp; Dates</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="strings_dates_time_files/libs/clipboard/clipboard.min.js"></script>
<script src="strings_dates_time_files/libs/quarto-html/quarto.js"></script>
<script src="strings_dates_time_files/libs/quarto-html/popper.min.js"></script>
<script src="strings_dates_time_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="strings_dates_time_files/libs/quarto-html/anchor.min.js"></script>
<link href="strings_dates_time_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="strings_dates_time_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="strings_dates_time_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="strings_dates_time_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="strings_dates_time_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#dataset-we-will-use" id="toc-dataset-we-will-use" class="nav-link" data-scroll-target="#dataset-we-will-use"><span class="header-section-number">1.1</span> Dataset we will use</a></li>
  </ul></li>
  <li><a href="#review-of-data-structures-and-types" id="toc-review-of-data-structures-and-types" class="nav-link" data-scroll-target="#review-of-data-structures-and-types"><span class="header-section-number">2</span> Review of Data structures and types</a></li>
  <li><a href="#string-basics" id="toc-string-basics" class="nav-link" data-scroll-target="#string-basics"><span class="header-section-number">3</span> String basics</a></li>
  <li><a href="#stringr-package" id="toc-stringr-package" class="nav-link" data-scroll-target="#stringr-package"><span class="header-section-number">4</span> <code>stringr</code> package</a>
  <ul class="collapse">
  <li><a href="#str_length" id="toc-str_length" class="nav-link" data-scroll-target="#str_length"><span class="header-section-number">4.1</span> <code>str_length()</code></a></li>
  <li><a href="#str_c" id="toc-str_c" class="nav-link" data-scroll-target="#str_c"><span class="header-section-number">4.2</span> <code>str_c()</code></a></li>
  <li><a href="#str_sub" id="toc-str_sub" class="nav-link" data-scroll-target="#str_sub"><span class="header-section-number">4.3</span> <code>str_sub()</code></a></li>
  <li><a href="#other-stringr-functions" id="toc-other-stringr-functions" class="nav-link" data-scroll-target="#other-stringr-functions"><span class="header-section-number">4.4</span> Other <code>stringr</code> functions</a></li>
  </ul></li>
  <li><a href="#dates-and-times" id="toc-dates-and-times" class="nav-link" data-scroll-target="#dates-and-times"><span class="header-section-number">5</span> Dates and times</a>
  <ul class="collapse">
  <li><a href="#creating-datetime-objects-by-parsing-input" id="toc-creating-datetime-objects-by-parsing-input" class="nav-link" data-scroll-target="#creating-datetime-objects-by-parsing-input"><span class="header-section-number">5.1</span> Creating date/time objects by parsing input</a></li>
  <li><a href="#creating-datetime-objects-from-individual-components" id="toc-creating-datetime-objects-from-individual-components" class="nav-link" data-scroll-target="#creating-datetime-objects-from-individual-components"><span class="header-section-number">5.2</span> Creating date/time objects from individual components</a></li>
  <li><a href="#datetime-object-components" id="toc-datetime-object-components" class="nav-link" data-scroll-target="#datetime-object-components"><span class="header-section-number">5.3</span> Date/time object components</a></li>
  <li><a href="#time-spans" id="toc-time-spans" class="nav-link" data-scroll-target="#time-spans"><span class="header-section-number">5.4</span> Time spans</a></li>
  </ul></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"><span class="header-section-number">6</span> Appendix</a>
  <ul class="collapse">
  <li><a href="#special-characters" id="toc-special-characters" class="nav-link" data-scroll-target="#special-characters"><span class="header-section-number">6.1</span> Special Characters</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Strings &amp; Dates</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Load packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)  <span class="co"># package for manipulating strings (part of tidyverse)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)  <span class="co"># package for working with dates and times</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#library(rvest)  # package for reading and manipulating HTML</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>If package not yet installed</strong>, then must install before you load. Install in “console” rather than .Rmd file:</p>
<ul>
<li>Generic syntax: <code>install.packages("package_name")</code></li>
<li>Install “tidyverse”: <code>install.packages("tidyverse")</code></li>
</ul>
<p><strong>Note</strong>: When we load package, name of package is not in quotes; but when we install package, name of package is in quotes:</p>
<ul>
<li><code>install.packages("tidyverse")</code></li>
<li><code>library(tidyverse)</code></li>
</ul>
<p>Resources used to create this lecture:</p>
<ul>
<li>https://r4ds.had.co.nz/strings.html</li>
<li>https://www.tutorialspoint.com/r/r_strings.htm</li>
<li>https://swcarpentry.github.io/r-novice-inflammation/13-supp-data-structures/</li>
<li>https://www.statmethods.net/input/datatypes.html</li>
<li>https://www.stat.berkeley.edu/~s133/dates.html</li>
</ul>
<section id="dataset-we-will-use" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="dataset-we-will-use"><span class="header-section-number">1.1</span> Dataset we will use</h2>
<p>We will use <code>rtweet</code> to pull Twitter data from the PAC-12 universities. We will use the university admissions Twitter handle if there is one, or the main Twitter handle for the university if there isn’t one:</p>
<ul>
<li>We wrote a short tutorial on using <code>rtweet</code> in the Fall 2020 version of this class:
<ul>
<li><a href="https://anyone-can-cook.github.io/rclass1/in_class/rtweet/intro_to_rtweet.html">LINK</a> to html file</li>
<li><a href="https://anyone-can-cook.github.io/rclass1/in_class/rtweet/intro_to_rtweet.Rmd">LINK</a> to .Rmd file</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(rtweet)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># p12 &lt;- c("uaadmissions", "FutureSunDevils", "caladmissions", "UCLAAdmission",</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#          "futurebuffs", "uoregon", "BeaverVIP", "USCAdmission",</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#          "engagestanford", "UtahAdmissions", "UW", "WSUPullman")</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># p12_full_df &lt;- search_tweets(paste0("from:", p12, collapse = " OR "), n = 500)</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(p12_full_df, "p12_dataset.RDS")</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Load previously pulled Twitter data</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># p12_full_df &lt;- readRDS("p12_dataset.RDS")</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>p12_full_df <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">url</span>(<span class="st">"https://github.com/anyone-can-cook/rclass1/raw/master/data/twitter/p12_dataset.RDS"</span>, <span class="st">"rb"</span>))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#glimpse(p12_full_df)</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>p12_df <span class="ot">&lt;-</span> p12_full_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">"user_id"</span>, <span class="st">"created_at"</span>, <span class="st">"screen_name"</span>, <span class="st">"text"</span>, <span class="st">"location"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(p12_df)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   user_id  created_at          screen_name text                         location</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;    &lt;dttm&gt;              &lt;chr&gt;       &lt;chr&gt;                        &lt;chr&gt;   </span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 22080148 2020-04-25 22:37:18 WSUPullman  "Big Dez is headed to Indy!… Pullman…</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 22080148 2020-04-23 21:11:49 WSUPullman  "Cougar Cheese. That's it. … Pullman…</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 22080148 2020-04-21 04:00:00 WSUPullman  "Darien McLaughlin '19, and… Pullman…</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 22080148 2020-04-24 03:00:00 WSUPullman  "6 houses, one pick. Cougs,… Pullman…</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 22080148 2020-04-20 19:00:21 WSUPullman  "Why did you choose to atte… Pullman…</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 22080148 2020-04-20 02:20:01 WSUPullman  "Tell us one of your Bryan … Pullman…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="review-of-data-structures-and-types" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Review of Data structures and types</h1>
<p>What is an <strong>object</strong>?</p>
<ul>
<li>Everything in R is an object</li>
<li>We can classify objects based on their <strong>class</strong> and <strong>type</strong>
<ul>
<li><code>class()</code>: What kind of object is it (high-level)?
<ul>
<li>The class of the object determines what kind of functions we can apply to it</li>
</ul></li>
<li><code>typeof()</code>: What is the object’s data type (low-level)?</li>
</ul></li>
<li>Objects may be combined to form <strong>data structures</strong></li>
</ul>
<p><a href="https://r4ds.had.co.nz/vectors.html"><img src="https://d33wubrfki0l68.cloudfront.net/1d1b4e1cf0dc5f6e80f621b0225354b0addb9578/6ee1c/diagrams/data-structures-overview.png" class="img-fluid" width="400"></a></p>
<p><em>Credit: <a href="https://r4ds.had.co.nz/vectors.html">R for Data Science</a></em></p>
<p><br> Basic <strong>data types</strong>:</p>
<ul>
<li>Logical (<code>TRUE</code>, <code>FALSE</code>)</li>
<li>Numeric (e.g., <code>5</code>, <code>2.5</code>)</li>
<li>Integer (e.g., <code>1L</code>, <code>4L</code>, where <code>L</code> tells R to store as <code>integer</code> type)</li>
<li>Character (e.g., <code>"R is fun"</code>)</li>
</ul>
<p>Basic <strong>data structures</strong>:</p>
<p><em>Review from Intro to R and Attributes and Class lectures:</em></p>
<ul>
<li><a href="https://anyone-can-cook.github.io/rclass1-redesign/lectures/updated_lectures/intro_to_r/intro_to_r.html#atomic-vectors">Atomic vectors</a></li>
<li><a href="https://anyone-can-cook.github.io/rclass1-redesign/lectures/updated_lectures/intro_to_r/intro_to_r.html#lists">Lists</a>
<ul>
<li><a href="https://anyone-can-cook.github.io/rclass1-redesign/lectures/updated_lectures/attributes_and_class/attributes_and_class.html#data-frames">Dataframes</a></li>
</ul></li>
</ul>
</section>
<section id="string-basics" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> String basics</h1>
<p>What are <strong>strings</strong>?</p>
<ul>
<li>String is a type of data in R</li>
<li>You can create strings using either single quotes (<code>'</code>) or double quotes (<code>"</code>)
<ul>
<li>Internally, R stores strings using double quotes</li>
</ul></li>
<li>The <code>class()</code> and <code>typeof()</code> a string is <code>character</code></li>
</ul>
<p><br> <strong>Example</strong>: Creating string using single quotes</p>
<p>Notice how R stores strings using double quotes internally:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">'This is a string'</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "This is a string"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>Example</strong>: Creating string using double quotes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">"Strings can also contain numbers: 123"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Strings can also contain numbers: 123"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>Example</strong>: Checking class and type of strings</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(my_string)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "character"</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(my_string)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "character"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>Note</strong>: To include quotes as part of the string, we can either use the other type of quotes to surround the string (i.e., <code>'</code> or <code>"</code>) or escape the quote using a backslash (<code>\</code>). <em>We won’t be going in-depth into escaping characters for this class, but see appendix for more details if you are interested.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Include quote by using the other type of quotes to surround the string </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">"There's no issues with this string."</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "There's no issues with this string."</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Include quote of the same type by escaping it with a backslash</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">'There</span><span class="sc">\'</span><span class="st">s no issues with this string.'</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "There's no issues with this string."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This would not work</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">'There'</span>s an issue with this string.<span class="st">'</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="st">my_string</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</section>
<section id="stringr-package" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> <code>stringr</code> package</h1>
<blockquote class="blockquote">
<p>“A consistent, simple and easy to use set of wrappers around the fantastic <code>stringi</code> package. All function and argument names (and positions) are consistent, all functions deal with <code>NA</code>’s and zero length vectors in the same way, and the output from one function is easy to feed into the input of another.”</p>
</blockquote>
<p><em>Credit: <code>stringr</code><a href="https://www.rdocumentation.org/packages/stringr/versions/1.4.0">R documentation</a></em></p>
<p>The <code>stringr</code> package:</p>
<ul>
<li>The <code>stringr</code> package is based off the <code>stringi</code> package and is part of <strong>Tidyverse</strong></li>
<li><code>stringr</code> contains functions to work with strings</li>
<li>For many functions in the <code>stringr</code> package, there are equivalent “base R” functions</li>
<li>But <code>stringr</code> functions all follow the same rules, while rules often differ across different “base R” string functions, so we will focus exclusively on <code>stringr</code> functions</li>
<li>Most <code>stringr</code> functions start with <code>str_</code> (e.g., <code>str_length</code>)</li>
</ul>
<section id="str_length" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="str_length"><span class="header-section-number">4.1</span> <code>str_length()</code></h2>
<p><br> <strong>The <code>str_length()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>?str_length</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Function: Find string length</li>
<li>Arguments:
<ul>
<li><code>string</code>: Character vector (or vector coercible to character)</li>
</ul></li>
<li>Note that <code>str_length()</code> calculates the length of a string, whereas the <code>length()</code> function (which is not part of <code>stringr</code> package) calculates the number of elements in an object</li>
</ul>
<p><br></p>
<p><strong>Example</strong>: Using <code>str_length()</code> on string</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="st">"cats"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Compare to <code>length()</code>, which treats the string as a single object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="st">"cats"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Example</strong>: Using <code>str_length()</code> on a character vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="st">"cats"</span>, <span class="st">"in"</span>, <span class="st">"hat"</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4 2 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Compare to <code>length()</code>, which finds the number of elements in the vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">c</span>(<span class="st">"cats"</span>, <span class="st">"in"</span>, <span class="st">"hat"</span>))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
<strong>Example</strong>: Using <code>str_length()</code> on other vectors coercible to character
</summary>
<p>Logical vectors can be coerced to character vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 4 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Numeric vectors can be coerced to character vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">2.5</span>, <span class="dv">3000</span>))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 3 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Integer vectors can be coerced to character vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">c</span>(<span class="dv">2</span>L, <span class="dv">100</span>L))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_length()</code> on dataframe column
</summary>
<p>Recall that the columns in a dataframe are just vectors, so we can use <code>str_length()</code> as long as the vector is coercible to character type. Let’s look at the <code>screen_name</code> column from the <code>p12_df</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># `p12_df` is a dataframe object</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(p12_df)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tibble [328 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ user_id    : chr [1:328] "22080148" "22080148" "22080148" "22080148" ...</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ created_at : POSIXct[1:328], format: "2020-04-25 22:37:18" "2020-04-23 21:11:49" ...</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ screen_name: chr [1:328] "WSUPullman" "WSUPullman" "WSUPullman" "WSUPullman" ...</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ text       : chr [1:328] "Big Dez is headed to Indy!\n\n#GoCougs | #NFLDraft2020 | @dadpat7 | @Colts | #NFLCougs https://t.co/NdGsvXnij7" "Cougar Cheese. That's it. That's the tweet. 🧀#WSU #GoCougs https://t.co/0OWGvQlRZs" "Darien McLaughlin '19, and her dog, Yuki, went on a #Pullman distance walk this weekend. We will let you judge "| __truncated__ "6 houses, one pick. Cougs, which one you got? Reply ⬇️  #WSU #CougsContain #GoCougs https://t.co/lNDx7r71b2" ...</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ location   : chr [1:328] "Pullman, Washington USA" "Pullman, Washington USA" "Pullman, Washington USA" "Pullman, Washington USA" ...</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># `screen_name` column is a character vector</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(p12_df<span class="sc">$</span>screen_name)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  chr [1:328] "WSUPullman" "WSUPullman" "WSUPullman" "WSUPullman" ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>[Base R method]</strong> Use <code>str_length()</code> to calculate the length of each <code>screen_name</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's focus on just the unique screen names</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(p12_df<span class="sc">$</span>screen_name)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "WSUPullman"      "CalAdmissions"   "UW"              "USCAdmission"   </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] "uoregon"         "FutureSunDevils" "UCLAAdmission"   "UtahAdmissions" </span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] "futurebuffs"     "uaadmissions"    "BeaverVIP"</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">unique</span>(p12_df<span class="sc">$</span>screen_name))</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] 10 13  2 12  7 15 13 14 11 12  9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>[Tidyverse method]</strong> Use <code>str_length()</code> to calculate the length of each <code>screen_name</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's focus on just the unique screen names</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>p12_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(screen_name) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11 × 1</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    screen_name    </span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;          </span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 WSUPullman     </span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 CalAdmissions  </span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 UW             </span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 USCAdmission   </span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 uoregon        </span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 FutureSunDevils</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 UCLAAdmission  </span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 UtahAdmissions </span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 futurebuffs    </span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 uaadmissions   </span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 BeaverVIP</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co">#p12_df %&gt;% select(screen_name) %&gt;% unique() %&gt;% str_length()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice that the above line does not work as expected because we passed in a dataframe to <code>str_length()</code> and it is trying to coerce that to character:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(p12_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(screen_name) <span class="sc">%&gt;%</span> <span class="fu">unique</span>())</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>An alternative way is to add a column to the dataframe that contains the result of applying <code>str_length()</code> to the <code>screen_name</code> vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>p12_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(screen_name) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">screen_name_len =</span> <span class="fu">str_length</span>(screen_name))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11 × 2</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    screen_name     screen_name_len</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                     &lt;int&gt;</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 WSUPullman                   10</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 CalAdmissions                13</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 UW                            2</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 USCAdmission                 12</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 uoregon                       7</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 FutureSunDevils              15</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 UCLAAdmission                13</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 UtahAdmissions               14</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 futurebuffs                  11</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 uaadmissions                 12</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 BeaverVIP                     9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="str_c" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="str_c"><span class="header-section-number">4.2</span> <code>str_c()</code></h2>
<p><br> <strong>The <code>str_c()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>?str_c</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(..., <span class="at">sep =</span> <span class="st">""</span>, <span class="at">collapse =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Function: Concatenate strings between vectors (element-wise)</li>
<li>Arguments:
<ul>
<li>The input is one or more character vectors (or vectors coercible to character)
<ul>
<li>Zero length arguments are removed</li>
<li>Scalar inputs (vectors of length 1) are recycled to the common length of vector inputs</li>
</ul></li>
<li><code>sep</code>: String to insert between input vectors</li>
<li><code>collapse</code>: Optional string used to combine input vectors into single string</li>
</ul></li>
</ul>
<!--

ADDED 11/3/2020. JUST MESSING AROUND TO SEE HOW IT TREATS ELEMENTS OF A VECTOR VS. SEPARATE VECTORS
::: {.cell}

```{.r .cell-code}
str_c("a","b", sep = "", collapse = NULL)
#> [1] "ab"
str_c("a","b", sep = "~", collapse = NULL)
#> [1] "a~b"

str_c("a","b", sep = "", collapse = ";")
#> [1] "ab"
str_c("a","b", sep = "~", collapse = ";")
#> [1] "a~b"

str_c(c("a"),c("b"), sep = "~", collapse = ";")
#> [1] "a~b"
str_c(c("a"),c("b"), sep = "", collapse = ";")
#> [1] "ab"
```
:::

::: {.cell}

```{.r .cell-code}
s1 <- c("s1e1","s1e2","s1e3")
s2 <- c("s2e1","s2e2","s2e3")
s3 <- c("s3e1","s3e2","s3e3","s3e4","s3e5","s3e6")

str_c(s1, sep = "", collapse = NULL)
#> [1] "s1e1" "s1e2" "s1e3"
str_c(s1, sep = "", collapse = NULL) %>% length()
#> [1] 3
str_c(s1, sep = "", collapse = NULL) %>% str_length()
#> [1] 4 4 4


str_c(s1, sep = "~", collapse = NULL)
#> [1] "s1e1" "s1e2" "s1e3"
str_c(s1, sep = "~", collapse = ";")
#> [1] "s1e1;s1e2;s1e3"
```
:::

ADDED 11/3/2020. JUST MESSING AROUND TO SEE HOW IT TREATS ELEMENTS OF A VECTOR VS. SEPARATE VECTORS
::: {.cell}

```{.r .cell-code}
s1 <- c("a","b","c")
s2 <- c("d","e","f")
s3 <- c("a","b","c","d","e","f")

str_c("a","b", sep = "", collapse = NULL)
#> [1] "ab"

str_c(s1, sep = "", collapse = NULL)
#> [1] "a" "b" "c"
str_c(s2, sep = "", collapse = NULL)
#> [1] "d" "e" "f"
str_c(s3, sep = "", collapse = NULL)
#> [1] "a" "b" "c" "d" "e" "f"
str_c(s1,s2, sep = "", collapse = NULL)
#> [1] "ad" "be" "cf"

# add a separator
str_c(s1, sep = "~", collapse = NULL)
#> [1] "a" "b" "c"
str_c(s2, sep = "~", collapse = NULL)
#> [1] "d" "e" "f"
str_c(s3, sep = "~", collapse = NULL)
#> [1] "a" "b" "c" "d" "e" "f"
str_c(s1,s2, sep = "~", collapse = NULL)
#> [1] "a~d" "b~e" "c~f"
```
:::

-->
<p><br> <strong>Example</strong>: Using <code>str_c()</code> on one vector</p>
<p>Since we only provided one input vector, it has nothing to concatenate with, so <code>str_c()</code> will just return the same vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a" "b" "c"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that specifying the <code>sep</code> argument will also not have any effect because we only have one input vector, and <code>sep</code> is the separator between multiple vectors:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="at">sep =</span> <span class="st">"~"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a" "b" "c"</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check length: Output is the original vector of 3 elements</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As seen above, <code>str_c()</code> returns a vector by default (because the default value for the <code>collapse</code> argument is <code>NULL</code>). But we can specify a string for <code>collapse</code> in order to collapse the elements of the output vector into a single string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a|b|c"</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check length: Output vector of length 3 is collapsed into a single string</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="at">collapse =</span> <span class="st">"|"</span>) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Check str_length: This gives the length of the collapsed string, which is 5 characters long</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="at">collapse =</span> <span class="st">"|"</span>) <span class="sc">%&gt;%</span> <span class="fu">str_length</span>()</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>Example</strong>: Using <code>str_c()</code> on more than one vector</p>
<p>When we provide multiple input vectors, we can see that the vectors get concatenated element-wise (i.e., 1st element from each vector are concatenated, 2nd element from each vector are concatenated, etc):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>), <span class="fu">c</span>(<span class="st">"!"</span>, <span class="st">"?"</span>, <span class="st">";"</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "ax!" "by?" "cz;"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The default separator for each element-wise concatenation is an empty string (<code>""</code>), but we can customize that by specifying the <code>sep</code> argument:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>), <span class="fu">c</span>(<span class="st">"!"</span>, <span class="st">"?"</span>, <span class="st">";"</span>), <span class="at">sep =</span> <span class="st">"~"</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a~x~!" "b~y~?" "c~z~;"</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check length: Output vector is same length as input vectors</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>), <span class="fu">c</span>(<span class="st">"!"</span>, <span class="st">"?"</span>, <span class="st">";"</span>), <span class="at">sep =</span> <span class="st">"~"</span>) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Again, we can specify the <code>collapse</code> argument in order to collapse the elements of the output vector into a single string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>), <span class="fu">c</span>(<span class="st">"!"</span>, <span class="st">"?"</span>, <span class="st">";"</span>), <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "ax!|by?|cz;"</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check length: Output vector of length 3 is collapsed into a single string</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>), <span class="fu">c</span>(<span class="st">"!"</span>, <span class="st">"?"</span>, <span class="st">";"</span>), <span class="at">collapse =</span> <span class="st">"|"</span>) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Specifying both `sep` and `collapse`</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span>), <span class="fu">c</span>(<span class="st">"!"</span>, <span class="st">"?"</span>, <span class="st">";"</span>), <span class="at">sep =</span> <span class="st">"~"</span>, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a~x~!|b~y~?|c~z~;"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>Example</strong>: Using <code>str_c()</code> on “strings”</p>
<p>What do we mean by “strings”?</p>
<ul>
<li>Informally, We can think of a “string” as being a character vector with <code>length()</code> equal to 1 (i.e., one element).</li>
<li>Another way to think of it, a “string” is anything you put in between quotes”.</li>
<li>Loosely, we can also think of individual elements within a character vector as strings</li>
</ul>
<p>Below, passing 3 strings into <code>str_c()</code> is like passing in 3 vectors of size 1 each.</p>
<ul>
<li>Remember that vectors are concatenated element-wise, so these strings will be joined like this:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "abc"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Again, we can think of strings as being character vectors of size 1</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>), <span class="fu">c</span>(<span class="st">"b"</span>), <span class="fu">c</span>(<span class="st">"c"</span>))</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "abc"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can use <code>sep</code> to specify how the elements are separated:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="at">sep =</span> <span class="st">"~"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a~b~c"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since we only have 1 element in each vector, the output from <code>str_c()</code> is a vector of length 1. Thus, <code>collapse</code> will not be useful here since it works to collapse multiple elements in the output vector into a single string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "abc"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Using <code>str_c()</code> on types other than character
</summary>
<p>When we provide a non-character vector (such as a numeric or logical vector), it will get coerced into a character vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a1TRUE"  "b2FALSE" "c3FALSE"</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Specifying both `sep` and `collapse`</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>), <span class="at">sep =</span> <span class="st">"~"</span>, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "a~1~TRUE|b~2~FALSE|c~3~FALSE"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that we can also use any other single element input (other than string) that can be coerced to character:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="cn">TRUE</span>, <span class="fl">1.5</span>, <span class="dv">2</span>L, <span class="st">"X"</span>) </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "TRUE1.52X"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_c()</code> on vectors of different lengths
</summary>
<p><br></p>
<p>When trying to join vectors of different length, you will run into an error.</p>
<ul>
<li><p>This is because new recycling rules are applied to the <code>stringr()</code> package to be consistent with other tidyverse recycling rules (see Wickham blog 12/05/2022)[https://www.tidyverse.org/blog/2022/12/stringr-1-5-0/#recycling-rules]</p></li>
<li><p>In practice this makes sense when working with data frames and tidyverse because columns (variables) in a data frame must be the same length.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"#"</span>, <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Specifying both `sep` and `collapse`</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">"#"</span>, <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">sep =</span> <span class="st">"~"</span>, <span class="at">collapse =</span> <span class="st">"|"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_c()</code> on dataframe columns
</summary>
<p><br></p>
<p>Let’s combine the <code>user_id</code> and <code>screen_name</code> columns from <code>p12_df</code>. We’ll focus on unique Twitter handles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>p12_unique_df <span class="ot">&lt;-</span> p12_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(user_id, screen_name) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>p12_unique_df</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11 × 2</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    user_id    screen_name    </span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;          </span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 22080148   WSUPullman     </span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 15988549   CalAdmissions  </span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 27103822   UW             </span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 198643896  USCAdmission   </span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 40940457   uoregon        </span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 325014504  FutureSunDevils</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2938776590 UCLAAdmission  </span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 4922145709 UtahAdmissions </span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 45879674   futurebuffs    </span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 44733626   uaadmissions   </span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 403743606  BeaverVIP</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>[Base R method]</strong> Use <code>str_c()</code> to combine <code>user_id</code> and <code>screen_name</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(p12_unique_df<span class="sc">$</span>user_id, <span class="st">"="</span>, p12_unique_df<span class="sc">$</span>screen_name, <span class="at">sep =</span> <span class="st">" "</span>, <span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "22080148 = WSUPullman, 15988549 = CalAdmissions, 27103822 = UW, 198643896 = USCAdmission, 40940457 = uoregon, 325014504 = FutureSunDevils, 2938776590 = UCLAAdmission, 4922145709 = UtahAdmissions, 45879674 = futurebuffs, 44733626 = uaadmissions, 403743606 = BeaverVIP"</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(p12_unique_df<span class="sc">$</span>user_id, <span class="st">"="</span>, p12_unique_df<span class="sc">$</span>screen_name, <span class="at">sep =</span> <span class="st">" "</span>) <span class="co"># without collapsing to one element</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "22080148 = WSUPullman"       "15988549 = CalAdmissions"   </span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [3] "27103822 = UW"               "198643896 = USCAdmission"   </span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [5] "40940457 = uoregon"          "325014504 = FutureSunDevils"</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "2938776590 = UCLAAdmission"  "4922145709 = UtahAdmissions"</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [9] "45879674 = futurebuffs"      "44733626 = uaadmissions"    </span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] "403743606 = BeaverVIP"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> <strong>[Tidyverse method]</strong> Use <code>str_c()</code> to combine <code>user_id</code> and <code>screen_name</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>p12_unique_df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">twitter_handle =</span> <span class="fu">str_c</span>(user_id,screen_name))</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11 × 3</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    user_id    screen_name     twitter_handle          </span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;                   </span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 22080148   WSUPullman      22080148WSUPullman      </span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 15988549   CalAdmissions   15988549CalAdmissions   </span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 27103822   UW              27103822UW              </span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 198643896  USCAdmission    198643896USCAdmission   </span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 40940457   uoregon         40940457uoregon         </span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 325014504  FutureSunDevils 325014504FutureSunDevils</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2938776590 UCLAAdmission   2938776590UCLAAdmission </span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 4922145709 UtahAdmissions  4922145709UtahAdmissions</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 45879674   futurebuffs     45879674futurebuffs     </span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 44733626   uaadmissions    44733626uaadmissions    </span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 403743606  BeaverVIP       403743606BeaverVIP</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>p12_unique_df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">twitter_handle =</span> <span class="fu">str_c</span>(<span class="st">"User #"</span>, user_id, <span class="st">" is @"</span>, screen_name))</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11 × 3</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    user_id    screen_name     twitter_handle                     </span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;                              </span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 22080148   WSUPullman      User #22080148 is @WSUPullman      </span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 15988549   CalAdmissions   User #15988549 is @CalAdmissions   </span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 27103822   UW              User #27103822 is @UW              </span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 198643896  USCAdmission    User #198643896 is @USCAdmission   </span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 40940457   uoregon         User #40940457 is @uoregon         </span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 325014504  FutureSunDevils User #325014504 is @FutureSunDevils</span></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2938776590 UCLAAdmission   User #2938776590 is @UCLAAdmission </span></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 4922145709 UtahAdmissions  User #4922145709 is @UtahAdmissions</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 45879674   futurebuffs     User #45879674 is @futurebuffs     </span></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 44733626   uaadmissions    User #44733626 is @uaadmissions    </span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 403743606  BeaverVIP       User #403743606 is @BeaverVIP</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="str_sub" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="str_sub"><span class="header-section-number">4.3</span> <code>str_sub()</code></h2>
<p><br> <strong>The <code>str_sub()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>?str_sub</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(string, <span class="at">start =</span> <span class="dv">1</span>L, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>L)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(string, <span class="at">start =</span> <span class="dv">1</span>L, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>L, <span class="at">omit_na =</span> <span class="cn">FALSE</span>) <span class="ot">&lt;-</span> value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Function: Subset strings</li>
<li>Arguments:
<ul>
<li><code>string</code>: Character vector (or vector coercible to character)</li>
<li><code>start</code>: Position of first character to be included in substring (default: <code>1</code>)</li>
<li><code>end</code>: Position of last character to be included in substring (default: <code>-1</code>)
<ul>
<li>Negative index means counting backwards from the end of the string</li>
<li>If an element in the vector is shorter than the specified <code>end</code>, it will just include all the available characters that it does have</li>
</ul></li>
<li><code>omit_na</code>: If <code>TRUE</code>, missing values in any of the arguments provided will result in an unchanged input</li>
</ul></li>
<li>When <code>str_sub()</code> is used in the assignment form, you can replace the subsetted part of the string with a <code>value</code> of your choice
<ul>
<li>If an element in the vector is too short to meet the subset specification, the replacement <code>value</code> will be concatenated to the end of that element</li>
<li>Note that this modifies your input vector directly, so you must have the vector saved to a variable (see example below)</li>
</ul></li>
</ul>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Using <code>str_sub()</code> to subset strings
</summary>
<p><br></p>
<p>If no <code>start</code> and <code>end</code> positions are specified, <code>str_sub()</code> will by default return the entire (original) string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(<span class="at">string =</span> <span class="fu">c</span>(<span class="st">"abcdefg"</span>, <span class="dv">123</span>, <span class="cn">TRUE</span>))</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "abcdefg" "123"     "TRUE"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that if an element is shorter than the specified <code>end</code> (i.e., <code>123</code> in the example below), it will just include all the available characters that it does have:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(<span class="at">string =</span> <span class="fu">c</span>(<span class="st">"abcdefg"</span>, <span class="dv">123</span>, <span class="cn">TRUE</span>), <span class="at">start =</span> <span class="dv">2</span>, <span class="at">end =</span> <span class="dv">4</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "bcd" "23"  "RUE"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Remember we can also use negative index to count the position starting from the back:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(<span class="fu">c</span>(<span class="st">"abcdefg"</span>, <span class="dv">123</span>, <span class="cn">TRUE</span>), <span class="at">start =</span> <span class="dv">2</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">2</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "bcdef" "2"     "RU"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_sub()</code> to replace strings
</summary>
<p><br></p>
<p>If no <code>start</code> and <code>end</code> positions are specified, <code>str_sub()</code> will by default return the original string, so the entire string would be replaced:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"AB"</span>, <span class="st">"ABC"</span>, <span class="st">"ABCD"</span>, <span class="st">"ABCDE"</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(v, <span class="at">start =</span> <span class="dv">1</span>,<span class="at">end =</span><span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "A"     "AB"    "ABC"   "ABCD"  "ABCDE"</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(v, <span class="at">start =</span> <span class="dv">1</span>,<span class="at">end =</span><span class="sc">-</span><span class="dv">1</span>) <span class="ot">&lt;-</span> <span class="st">"*"</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "*" "*" "*" "*" "*"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If an element in the vector is too short to meet the subset specification, the replacement <code>value</code> will be concatenated to the end of that element:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"AB"</span>, <span class="st">"ABC"</span>, <span class="st">"ABCD"</span>, <span class="st">"ABCDE"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "A"     "AB"    "ABC"   "ABCD"  "ABCDE"</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(v, <span class="at">start =</span> <span class="dv">2</span>, <span class="at">end =</span> <span class="dv">3</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] ""   "B"  "BC" "BC" "BC"</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(v, <span class="at">start =</span> <span class="dv">2</span>, <span class="at">end =</span> <span class="dv">3</span>) <span class="ot">&lt;-</span> <span class="st">"*"</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>v</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "A*"   "A*"   "A*"   "A*D"  "A*DE"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that because the replacement form of <code>str_sub()</code> modifies the input vector directly, we need to save it in a variable first. Directly passing in the vector to <code>str_sub()</code> would give us an error:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Does not work</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(<span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"AB"</span>, <span class="st">"ABC"</span>, <span class="st">"ABCD"</span>, <span class="st">"ABCDE"</span>)) <span class="ot">&lt;-</span> <span class="st">"*"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_sub()</code> on dataframe column
</summary>
<p><br></p>
<p>We can use <code>as.character()</code> to turn the <code>created_at</code> value to a string, then use <code>str_sub()</code> to extract out various date/time components from the string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co">#str(p12_df %&gt;% select(created_at))</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(p12_df<span class="sc">$</span>created_at)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(p12_df<span class="sc">$</span>created_at)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "POSIXct" "POSIXt"</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(p12_df<span class="sc">$</span>created_at)</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2020-04-25 22:37:18 UTC" "2020-04-23 21:11:49 UTC"</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] "2020-04-21 04:00:00 UTC" "2020-04-24 03:00:00 UTC"</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [5] "2020-04-20 19:00:21 UTC" "2020-04-20 02:20:01 UTC"</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>p12_datetime_df <span class="ot">&lt;-</span> p12_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(created_at) <span class="sc">%&gt;%</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">dt_chr =</span> <span class="fu">as.character</span>(created_at), <span class="co">#convert to character</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">date_chr =</span> <span class="fu">str_sub</span>(dt_chr, <span class="dv">1</span>, <span class="dv">10</span>), <span class="co">#subset values in position 1 and 10 to grab the date</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">yr_chr =</span> <span class="fu">str_sub</span>(dt_chr, <span class="dv">1</span>, <span class="dv">4</span>), <span class="co">#subset values in position 1 and 4 to grab the year</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">mth_chr =</span> <span class="fu">str_sub</span>(dt_chr, <span class="dv">6</span>, <span class="dv">7</span>),</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">day_chr =</span> <span class="fu">str_sub</span>(dt_chr, <span class="dv">9</span>, <span class="dv">10</span>),</span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">hr_chr =</span> <span class="fu">str_sub</span>(dt_chr, <span class="sc">-</span><span class="dv">8</span>, <span class="sc">-</span><span class="dv">7</span>),</span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">min_chr =</span> <span class="fu">str_sub</span>(dt_chr, <span class="sc">-</span><span class="dv">5</span>, <span class="sc">-</span><span class="dv">4</span>),</span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">sec_chr =</span> <span class="fu">str_sub</span>(dt_chr, <span class="sc">-</span><span class="dv">2</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>p12_datetime_df</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 328 × 9</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    created_at          dt_chr     date_chr yr_chr mth_chr day_chr hr_chr min_chr</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;  </span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2020-04-25 22:37:18 2020-04-2… 2020-04… 2020   04      25      22     37     </span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2020-04-23 21:11:49 2020-04-2… 2020-04… 2020   04      23      21     11     </span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2020-04-21 04:00:00 2020-04-2… 2020-04… 2020   04      21      04     00     </span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2020-04-24 03:00:00 2020-04-2… 2020-04… 2020   04      24      03     00     </span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2020-04-20 19:00:21 2020-04-2… 2020-04… 2020   04      20      19     00     </span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2020-04-20 02:20:01 2020-04-2… 2020-04… 2020   04      20      02     20     </span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2020-04-22 04:00:00 2020-04-2… 2020-04… 2020   04      22      04     00     </span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2020-04-25 17:00:00 2020-04-2… 2020-04… 2020   04      25      17     00     </span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2020-04-21 15:13:06 2020-04-2… 2020-04… 2020   04      21      15     13     </span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2020-04-21 17:52:47 2020-04-2… 2020-04… 2020   04      21      17     52     </span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 318 more rows</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 1 more variable: sec_chr &lt;chr&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="other-stringr-functions" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="other-stringr-functions"><span class="header-section-number">4.4</span> Other <code>stringr</code> functions</h2>
<p>Other useful <code>stringr</code> functions:</p>
<ul>
<li><code>str_to_upper()</code>: Turn strings to uppercase</li>
<li><code>str_to_lower()</code>: Turn strings to lowercase</li>
<li><code>str_sort()</code>: Sort a character vector</li>
<li><code>str_trim()</code>: Trim whitespace from strings (including <code>\n</code>, <code>\t</code>, etc.)</li>
<li><code>str_pad()</code>: Pad strings with specified character</li>
</ul>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Using <code>str_to_upper()</code> to turn strings to uppercase
</summary>
<p><br></p>
<p>Turn column names of <code>p12_df</code> to uppercase:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Column names are originally lowercase</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p12_df)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "user_id"     "created_at"  "screen_name" "text"        "location"</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn column names to uppercase</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p12_df) <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(<span class="fu">names</span>(p12_df))</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p12_df)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "USER_ID"     "CREATED_AT"  "SCREEN_NAME" "TEXT"        "LOCATION"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_to_lower()</code> to turn strings to lowercase
</summary>
<p><br></p>
<p>Turn column names of <code>p12_df</code> to lowercase:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Column names are originally uppercase</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p12_df)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "USER_ID"     "CREATED_AT"  "SCREEN_NAME" "TEXT"        "LOCATION"</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn column names to lowercase</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p12_df) <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(<span class="fu">names</span>(p12_df))</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p12_df)</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "user_id"     "created_at"  "screen_name" "text"        "location"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_sort()</code> to sort character vector
</summary>
<p><br></p>
<p>Sort the vector of <code>p12_df</code> column names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Before sort</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(p12_df)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "user_id"     "created_at"  "screen_name" "text"        "location"</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort alphabetically (default)</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(<span class="fu">names</span>(p12_df))</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "created_at"  "location"    "screen_name" "text"        "user_id"</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort reverse alphabetically</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(<span class="fu">names</span>(p12_df), <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "user_id"     "text"        "screen_name" "location"    "created_at"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_trim()</code> to trim whitespace from string
</summary>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trim whitespace from both left and right sides (default)</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="fu">c</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">ABC "</span>, <span class="st">" XYZ</span><span class="sc">\t</span><span class="st">"</span>))</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "ABC" "XYZ"</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Trim whitespace from left side</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="fu">c</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">ABC "</span>, <span class="st">" XYZ</span><span class="sc">\t</span><span class="st">"</span>), <span class="at">side =</span> <span class="st">"left"</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "ABC "  "XYZ\t"</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Trim whitespace from right side</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="fu">c</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">ABC "</span>, <span class="st">" XYZ</span><span class="sc">\t</span><span class="st">"</span>), <span class="at">side =</span> <span class="st">"right"</span>)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "\nABC" " XYZ"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Using <code>str_pad()</code> to pad string with character
</summary>
<p><br></p>
<p>Let’s say we have a vector of zip codes that has lost all leading 0’s. We can use <code>str_pad()</code> to add that back in:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pad the left side of strings with "0" until width of 5 is reached</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(<span class="fu">c</span>(<span class="dv">95035</span>, <span class="dv">90024</span>, <span class="dv">5009</span>, <span class="dv">5030</span>), <span class="at">width =</span> <span class="dv">5</span>, <span class="at">side =</span> <span class="st">"left"</span>, <span class="at">pad =</span> <span class="st">"0"</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "95035" "90024" "05009" "05030"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
</section>
<section id="dates-and-times" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Dates and times</h1>
<blockquote class="blockquote">
<p>“Date-time data can be frustrating to work with in R. R commands for date-times are generally unintuitive and change depending on the type of date-time object being used. Moreover, the methods we use with date-times must be robust to time zones, leap days, daylight savings times, and other time related quirks, and R lacks these capabilities in some situations. Lubridate makes it easier to do the things R does with date-times and possible to do the things R does not.”</p>
</blockquote>
<p><em>Credit: <code>lubridate</code><a href="https://lubridate.tidyverse.org/">documentation</a></em></p>
<p><strong>How are dates and times stored in R?</strong> (From <a href="https://www.stat.berkeley.edu/~s133/dates.html">Dates and Times in R</a>)</p>
<ul>
<li>The <code>Date</code> class is used for storing dates
<ul>
<li>“Internally, <code>Date</code> objects are stored as the number of days since January 1, 1970, using negative numbers for earlier dates. The <code>as.numeric()</code> function can be used to convert a <code>Date</code> object to its internal form.”</li>
</ul></li>
<li>POSIX classes can be used for storing date plus times
<ul>
<li>“The <code>POSIXct</code> class stores date/time values as the number of seconds since January 1, 1970”</li>
<li>“The <code>POSIXlt</code> class stores date/time values as a list of components (hour, min, sec, mon, etc.) making it easy to extract these parts”</li>
</ul></li>
<li>There is no native R class for storing only time</li>
</ul>
<p><strong>Why use date/time objects?</strong></p>
<ul>
<li>Using date/time objects makes it easier to fetch or modify various date/time components (e.g., year, month, day, day of the week)
<ul>
<li>Compared to if the date/time is just stored in a string, these components are not as readily accessible and need to be parsed</li>
</ul></li>
<li>You can perform certain arithmetics with date/time objects (e.g., find the “difference” between date/time points)</li>
</ul>
<section id="creating-datetime-objects-by-parsing-input" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="creating-datetime-objects-by-parsing-input"><span class="header-section-number">5.1</span> Creating date/time objects by parsing input</h2>
<p>Functions that create date/time objects <strong>by parsing character or numeric input</strong>:</p>
<ul>
<li>Create <code>Date</code> object: <code>ymd()</code>, <code>ydm()</code>, <code>mdy()</code>, <code>myd()</code>, <code>dmy()</code>, and <code>dym()</code>
<ul>
<li><code>y</code> stands for year, <code>m</code> stands for month, <code>d</code> stands for day</li>
<li>Select the function that represents the order in which your date input is formatted, and the function will be able to parse your input and create a <code>Date</code> object</li>
</ul></li>
<li>Create <code>POSIXct</code> object: <code>ymd_h()</code>, <code>ymd_hm()</code>, <code>ymd_hms()</code>, etc.
<ul>
<li><code>h</code> stands for hour, <code>m</code> stands for minute, <code>s</code> stands for second</li>
<li>For any of the previous 6 date functions, you can append <code>h</code>, <code>hm</code>, or <code>hms</code> if you want to provide additional time information in order to create a <code>POSIXct</code> object</li>
<li>To force a <code>POSIXct</code> object without providing any time information, you can just provide a timezone (using <code>tz</code>) to one of the date functions and it will assume midnight as the time</li>
<li>You can use <code>Sys.timezone()</code> to get the timezone for your location</li>
</ul></li>
</ul>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Creating <code>Date</code> object from character or numeric input
</summary>
<p>The <code>lubridate</code> functions are flexible and can parse dates in various formats:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">mdy</span>(<span class="st">"1/1/2024"</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01"</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">mdy</span>(<span class="st">"1-1-2024"</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01"</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">mdy</span>(<span class="st">"Jan. 1, 2024"</span>)</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01"</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="dv">20240101</span>)</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> Investigate the <code>Date</code> object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(d)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Date"</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(d)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of days since January 1, 1970</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(d)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 19723</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Creating <code>Date</code> objects from dataframe column
</summary>
<p>Using the <code>p12_datetime_df</code> we created earlier, we can create <code>Date</code> objects from the <code>date_chr</code> column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `ymd()` to parse the string stored in the `date_chr` column</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>p12_datetime_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(created_at, dt_chr, date_chr) <span class="sc">%&gt;%</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_ymd =</span> <span class="fu">ymd</span>(date_chr))</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 328 × 4</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    created_at          dt_chr              date_chr   date_ymd  </span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;chr&gt;               &lt;chr&gt;      &lt;date&gt;    </span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2020-04-25 22:37:18 2020-04-25 22:37:18 2020-04-25 2020-04-25</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2020-04-23 21:11:49 2020-04-23 21:11:49 2020-04-23 2020-04-23</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2020-04-21 04:00:00 2020-04-21 04:00:00 2020-04-21 2020-04-21</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2020-04-24 03:00:00 2020-04-24 03:00:00 2020-04-24 2020-04-24</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2020-04-20 19:00:21 2020-04-20 19:00:21 2020-04-20 2020-04-20</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2020-04-20 02:20:01 2020-04-20 02:20:01 2020-04-20 2020-04-20</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2020-04-22 04:00:00 2020-04-22 04:00:00 2020-04-22 2020-04-22</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2020-04-25 17:00:00 2020-04-25 17:00:00 2020-04-25 2020-04-25</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2020-04-21 15:13:06 2020-04-21 15:13:06 2020-04-21 2020-04-21</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2020-04-21 17:52:47 2020-04-21 17:52:47 2020-04-21 2020-04-21</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 318 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Creating <code>POSIXct</code> object from character or numeric input
</summary>
<p>The <code>lubridate</code> functions are flexible and can parse AM/PM in various formats:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">mdy_h</span>(<span class="st">"12/31/2023 11pm"</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31 23:00:00 UTC"</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">mdy_hm</span>(<span class="st">"12/31/2023 11:59 pm"</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31 23:59:00 UTC"</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">mdy_hms</span>(<span class="st">"12/31/2023 11:59:59 PM"</span>)</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31 23:59:59 UTC"</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="dv">20231231235959</span>)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31 23:59:59 UTC"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> Investigate the <code>POSIXct</code> object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dt)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "POSIXct" "POSIXt"</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(dt)</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "double"</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of seconds since January 1, 1970</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(dt)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1704067199</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> We can also create a <code>POSIXct</code> object from a date function by providing a timezone. The time would default to midnight:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">mdy</span>(<span class="st">"1/1/2024"</span>, <span class="at">tz =</span> <span class="st">"UTC"</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01 UTC"</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Number of seconds since January 1, 1970</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(dt)  <span class="co"># Note that this is indeed 1 sec after the previous example</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1704067200</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Creating <code>POSIXct</code> objects from dataframe column
</summary>
<p>Using the <code>p12_datetime_df</code> we created earlier, we can recreate the <code>created_at</code> column (class <code>POSIXct</code>) from the <code>dt_chr</code> column (class <code>character</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `ymd_hms()` to parse the string stored in the `dt_chr` column</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>p12_datetime_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(created_at, dt_chr) <span class="sc">%&gt;%</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">datetime_ymd_hms =</span> <span class="fu">ymd_hms</span>(dt_chr))</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 328 × 3</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    created_at          dt_chr              datetime_ymd_hms   </span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;chr&gt;               &lt;dttm&gt;             </span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2020-04-25 22:37:18 2020-04-25 22:37:18 2020-04-25 22:37:18</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2020-04-23 21:11:49 2020-04-23 21:11:49 2020-04-23 21:11:49</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2020-04-21 04:00:00 2020-04-21 04:00:00 2020-04-21 04:00:00</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2020-04-24 03:00:00 2020-04-24 03:00:00 2020-04-24 03:00:00</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2020-04-20 19:00:21 2020-04-20 19:00:21 2020-04-20 19:00:21</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2020-04-20 02:20:01 2020-04-20 02:20:01 2020-04-20 02:20:01</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2020-04-22 04:00:00 2020-04-22 04:00:00 2020-04-22 04:00:00</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2020-04-25 17:00:00 2020-04-25 17:00:00 2020-04-25 17:00:00</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2020-04-21 15:13:06 2020-04-21 15:13:06 2020-04-21 15:13:06</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2020-04-21 17:52:47 2020-04-21 17:52:47 2020-04-21 17:52:47</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 318 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="creating-datetime-objects-from-individual-components" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="creating-datetime-objects-from-individual-components"><span class="header-section-number">5.2</span> Creating date/time objects from individual components</h2>
<p>Functions that create date/time objects <strong>from various date/time components</strong>:</p>
<ul>
<li>Create <code>Date</code> object: <code>make_date()</code>
<ul>
<li>Syntax and default values: <code>make_date(year = 1970L, month = 1L, day = 1L)</code></li>
<li>All inputs are coerced to integer</li>
</ul></li>
<li>Create <code>POSIXct</code> object: <code>make_datetime()</code>
<ul>
<li>Syntax and default values: <code>make_datetime(year = 1970L, month = 1L, day = 1L, hour = 0L, min = 0L, sec = 0, tz = "UTC")</code></li>
<li>Input values should be numeric</li>
</ul></li>
</ul>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Creating <code>Date</code> object from individual components
</summary>
<p>There are various ways to pass in the inputs to create the same <code>Date</code> object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">make_date</span>(<span class="dv">2024</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01"</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Characters can be coerced to integers</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">make_date</span>(<span class="st">"2024"</span>, <span class="st">"01"</span>, <span class="st">"01"</span>)</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01"</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Remember that the default values for month and day would be 1L</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">make_date</span>(<span class="dv">2024</span>)</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2024-01-01"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Creating <code>Date</code> objects from dataframe columns
</summary>
<p>Using the <code>p12_datetime_df</code> we created earlier, we can create <code>Date</code> objects from the various date component columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `make_date()` to create a `Date` object from the `yr_chr`, `mth_chr`, `day_chr` fields</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>p12_datetime_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(created_at, dt_chr, yr_chr, mth_chr, day_chr) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_make_date =</span> <span class="fu">make_date</span>(<span class="at">year =</span> yr_chr, <span class="at">month =</span> mth_chr, <span class="at">day =</span> day_chr))</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 328 × 6</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    created_at          dt_chr              yr_chr mth_chr day_chr date_make_date</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dttm&gt;              &lt;chr&gt;               &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;date&gt;        </span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2020-04-25 22:37:18 2020-04-25 22:37:18 2020   04      25      2020-04-25    </span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2020-04-23 21:11:49 2020-04-23 21:11:49 2020   04      23      2020-04-23    </span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2020-04-21 04:00:00 2020-04-21 04:00:00 2020   04      21      2020-04-21    </span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2020-04-24 03:00:00 2020-04-24 03:00:00 2020   04      24      2020-04-24    </span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2020-04-20 19:00:21 2020-04-20 19:00:21 2020   04      20      2020-04-20    </span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2020-04-20 02:20:01 2020-04-20 02:20:01 2020   04      20      2020-04-20    </span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2020-04-22 04:00:00 2020-04-22 04:00:00 2020   04      22      2020-04-22    </span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2020-04-25 17:00:00 2020-04-25 17:00:00 2020   04      25      2020-04-25    </span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2020-04-21 15:13:06 2020-04-21 15:13:06 2020   04      21      2020-04-21    </span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2020-04-21 17:52:47 2020-04-21 17:52:47 2020   04      21      2020-04-21    </span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 318 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Creating <code>POSIXct</code> object from individual components
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inputs should be numeric</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">make_datetime</span>(<span class="dv">2023</span>, <span class="dv">12</span>, <span class="dv">31</span>, <span class="dv">23</span>, <span class="dv">59</span>, <span class="dv">59</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31 23:59:59 UTC"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Creating <code>POSIXct</code> objects from dataframe columns
</summary>
<p>Using the <code>p12_datetime_df</code> we created earlier, we can recreate the <code>created_at</code> column (class <code>POSIXct</code>) from the various date and time component columns (class <code>character</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `make_datetime()` to create a `POSIXct` object from the `yr_chr`, `mth_chr`, `day_chr`, `hr_chr`, `min_chr`, `sec_chr` fields</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert inputs to integers first</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>p12_datetime_df <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">datetime_make_datetime =</span> <span class="fu">make_datetime</span>(</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>(yr_chr), <span class="fu">as.integer</span>(mth_chr), <span class="fu">as.integer</span>(day_chr), </span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.integer</span>(hr_chr), <span class="fu">as.integer</span>(min_chr), <span class="fu">as.integer</span>(sec_chr)</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(datetime_make_datetime, yr_chr, mth_chr, day_chr, hr_chr, min_chr, sec_chr)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 328 × 7</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    datetime_make_datetime yr_chr mth_chr day_chr hr_chr min_chr sec_chr</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dttm&gt;                 &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2020-04-25 22:37:18    2020   04      25      22     37      18     </span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2020-04-23 21:11:49    2020   04      23      21     11      49     </span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2020-04-21 04:00:00    2020   04      21      04     00      00     </span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2020-04-24 03:00:00    2020   04      24      03     00      00     </span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2020-04-20 19:00:21    2020   04      20      19     00      21     </span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2020-04-20 02:20:01    2020   04      20      02     20      01     </span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2020-04-22 04:00:00    2020   04      22      04     00      00     </span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2020-04-25 17:00:00    2020   04      25      17     00      00     </span></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2020-04-21 15:13:06    2020   04      21      15     13      06     </span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2020-04-21 17:52:47    2020   04      21      17     52      47     </span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 318 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="datetime-object-components" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="datetime-object-components"><span class="header-section-number">5.3</span> Date/time object components</h2>
<p>Storing data using date/time objects makes it easier to <strong>get and set</strong> the various date/time components.</p>
<ul>
<li>Basic accessor functions:
<ul>
<li><code>date()</code>: Date component</li>
<li><code>year()</code>: Year</li>
<li><code>month()</code>: Month</li>
<li><code>day()</code>: Day</li>
<li><code>hour()</code>: Hour</li>
<li><code>minute()</code>: Minute</li>
<li><code>second()</code>: Second</li>
<li><code>week()</code>: Week of the year</li>
<li><code>wday()</code>: Day of the week (<code>1</code> for Sunday to <code>7</code> for Saturday)</li>
<li><code>am()</code>: Is it in the am? (returns <code>TRUE</code> or <code>FALSE</code>)</li>
<li><code>pm()</code>: Is it in the pm? (returns <code>TRUE</code> or <code>FALSE</code>)</li>
</ul></li>
<li>To <strong>get</strong> a date/time component, you can simply pass a date/time object to the function
<ul>
<li>Syntax: <code>accessor_function(&lt;date/time_object&gt;)</code></li>
</ul></li>
<li>To <strong>set</strong> a date/time component, you can assign into the accessor function to change the component
<ul>
<li>Syntax: <code>accessor_function(&lt;date/time_object&gt;) &lt;- "new_component"</code></li>
<li>Note that <code>am()</code> and <code>pm()</code> can’t be set. Modify the time components instead.</li>
</ul></li>
</ul>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Getting date/time components
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create datetime for New Year's Eve</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">make_datetime</span>(<span class="dv">2023</span>, <span class="dv">12</span>, <span class="dv">31</span>, <span class="dv">23</span>, <span class="dv">59</span>, <span class="dv">59</span>)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31 23:59:59 UTC"</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">class</span>()</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "POSIXct" "POSIXt"</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Get date</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span>(dt)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31"</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Get hour</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="fu">hour</span>(dt)</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 23</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Is it pm?</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="fu">pm</span>(dt)</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Day of the week (1 = Sunday)</span></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(dt)</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(dt)</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2023</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Setting date/time components
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create datetime for New Year's Eve</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">make_datetime</span>(<span class="dv">2023</span>, <span class="dv">12</span>, <span class="dv">31</span>, <span class="dv">23</span>, <span class="dv">59</span>, <span class="dv">59</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-31 23:59:59 UTC"</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Get week of year</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(dt)</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 53</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set week of year (move back 1 week)</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(dt) <span class="ot">&lt;-</span> <span class="fu">week</span>(dt) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Date now moved from New Year's Eve to Christmas Eve</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-24 23:59:59 UTC"</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Set day to Christmas Day</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(dt) <span class="ot">&lt;-</span> <span class="dv">25</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Date now moved from Christmas Eve to Christmas Day</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>dt</span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-12-25 23:59:59 UTC"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Getting date/time components from dataframe column
</summary>
<p>Using the <code>p12_datetime_df</code> we created earlier, we can isolate the various date/time components from the <code>POSIXct</code> object in the <code>created_at</code> column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The extracted date/time components will be of numeric type</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>p12_datetime_df <span class="sc">%&gt;%</span> <span class="fu">select</span>(created_at) <span class="sc">%&gt;%</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">yr_num =</span> <span class="fu">year</span>(created_at),</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mth_num =</span> <span class="fu">month</span>(created_at),</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_num =</span> <span class="fu">day</span>(created_at),</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">hr_num =</span> <span class="fu">hour</span>(created_at),</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_num =</span> <span class="fu">minute</span>(created_at),</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec_num =</span> <span class="fu">second</span>(created_at),</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ampm =</span> <span class="fu">ifelse</span>(<span class="fu">am</span>(created_at), <span class="st">'AM'</span>, <span class="st">'PM'</span>)  <span class="co"># am()/pm() returns TRUE/FALSE</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 328 × 8</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    created_at          yr_num mth_num day_num hr_num min_num sec_num ampm </span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dttm&gt;               &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;  &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 2020-04-25 22:37:18   2020       4      25     22      37      18 PM   </span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 2020-04-23 21:11:49   2020       4      23     21      11      49 PM   </span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 2020-04-21 04:00:00   2020       4      21      4       0       0 AM   </span></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 2020-04-24 03:00:00   2020       4      24      3       0       0 AM   </span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 2020-04-20 19:00:21   2020       4      20     19       0      21 PM   </span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 2020-04-20 02:20:01   2020       4      20      2      20       1 AM   </span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 2020-04-22 04:00:00   2020       4      22      4       0       0 AM   </span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 2020-04-25 17:00:00   2020       4      25     17       0       0 PM   </span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 2020-04-21 15:13:06   2020       4      21     15      13       6 PM   </span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2020-04-21 17:52:47   2020       4      21     17      52      47 PM   </span></span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 318 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
</section>
<section id="time-spans" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="time-spans"><span class="header-section-number">5.4</span> Time spans</h2>
<p><img src="https://raw.githubusercontent.com/anyone-can-cook/rclass2/master/assets/images/time_spans.png" class="img-fluid"></p>
<p>3 ways to represent time spans (From <a href="https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf">lubridate cheatsheet</a>)</p>
<ul>
<li><strong>Intervals</strong> represent specific intervals of the timeline, bounded by start and end date-times
<ul>
<li>Example: People with birthdays between the <strong>interval</strong> October 23 to November 22 are Scorpios</li>
</ul></li>
<li><strong>Periods</strong> track changes in clock times, which ignore time line irregularities
<ul>
<li>Example: Daylight savings time ends at the beginning of November and we gain an hour - this extra hour is <em>ignored</em> when determining the <strong>period</strong> between October 23 to November 22</li>
</ul></li>
<li><strong>Durations</strong> track the passage of physical time, which deviates from clock time when irregularities occur
<ul>
<li>Example: Daylight savings time ends at the beginning of November and we gain an hour - this extra hour is <em>added</em> when determining the <strong>duration</strong> between October 23 to November 22</li>
</ul></li>
</ul>
<p><strong>Time spans using <code>lubridate</code></strong></p>
<p>Using the <code>lubridate</code> package for time spans:</p>
<ul>
<li><strong>Interval</strong>
<ul>
<li>Create an interval using <code>interval()</code> or <code>%--%</code>
<ul>
<li>Syntax: <code>interval(&lt;date/time_object1&gt;, &lt;date/time_object2&gt;)</code> or <code>&lt;date/time_object1&gt; %--% &lt;date/time_object2&gt;</code></li>
</ul></li>
</ul></li>
<li><strong>Periods</strong>
<ul>
<li>“Periods are time spans but don’t have a fixed length in seconds, instead they work with ‘<em>human</em>’ times, like days and months.” (From <a href="https://r4ds.had.co.nz/dates-and-times.html#periods">R for Data Science</a>)</li>
<li>Create periods using functions whose name is the time unit pluralized (e.g., <code>years()</code>, <code>months()</code>, <code>weeks()</code>, <code>days()</code>, <code>hours()</code>, <code>minutes()</code>, <code>seconds()</code>)
<ul>
<li><p>Example: <code>days(1)</code> creates a period of 1 day - it does not matter if this day happened to have an extra hour due to daylight savings ending, since periods do not have a physical length</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">days</span>(<span class="dv">1</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "1d 0H 0M 0S"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
</ul></li>
<li>You can add and subtract periods</li>
<li>You can also use <code>as.period()</code> to get period of an interval</li>
</ul></li>
<li><strong>Durations</strong>
<ul>
<li>Durations keep track of the physical amount of time elapsed, so it is “stored as seconds, the only time unit with a consistent length” (From <a href="https://rawgit.com/rstudio/cheatsheets/master/lubridate.pdf">lubridate cheatsheet</a>)</li>
<li>Create durations using functions whose name is the time unit prefixed with a <code>d</code> (e.g., <code>dyears()</code>, <code>dweeks()</code>, <code>ddays()</code>, <code>dhours()</code>, <code>dminutes()</code>, <code>dseconds()</code>)
<ul>
<li><p>Example: <code>ddays(1)</code> creates a duration of <code>86400s</code>, using the standard conversion of <code>60</code> seconds in an minute, <code>60</code> minutes in an hour, and <code>24</code> hours in a day:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ddays</span>(<span class="dv">1</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "86400s (~1 days)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice that the output says this is equivalent to <em>approximately</em> <code>1</code> day, since it acknowledges that not all days have <code>24</code> hours. In the case of daylight savings, one particular day may have <code>25</code> hours, so the duration of that day should be represented as:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ddays</span>(<span class="dv">1</span>) <span class="sc">+</span> <span class="fu">dhours</span>(<span class="dv">1</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "90000s (~1.04 days)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
</ul></li>
<li>You can add and subract durations</li>
<li>You can also use <code>as.duration()</code> to get duration of an interval</li>
</ul></li>
</ul>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Working with interval
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `Sys.timezone()` to get timezone for your location (time is midnight by default)</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>scorpio_start <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2023-10-23"</span>, <span class="at">tz =</span> <span class="fu">Sys.timezone</span>())</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>scorpio_end <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2023-11-22"</span>, <span class="at">tz =</span> <span class="fu">Sys.timezone</span>())</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>scorpio_start</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-10-23 PDT"</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="co"># These datetime objects have class `POSIXct`</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(scorpio_start)</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "POSIXct" "POSIXt"</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create interval for the datetimes</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>scorpio_interval <span class="ot">&lt;-</span> scorpio_start <span class="sc">%--%</span> scorpio_end  <span class="co"># or `interval(scorpio_start, scorpio_end)`</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>scorpio_interval <span class="ot">&lt;-</span> <span class="fu">interval</span>(scorpio_start, scorpio_end)</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>scorpio_interval</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2023-10-23 PDT--2023-11-22 PST</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a><span class="co"># The object has class `Interval`</span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(scorpio_interval)</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Interval"</span></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,"package")</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "lubridate"</span></span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(scorpio_interval)</span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2595600</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Working with period
</summary>
<p>If we use <code>as.period()</code> to get the period of <code>scorpio_interval</code>, we see that it is a period of <code>30</code> days. We do not worry about the extra <code>1</code> hour gained due to daylight savings ending:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Period is 30 days</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>scorpio_period <span class="ot">&lt;-</span> <span class="fu">as.period</span>(scorpio_interval)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>scorpio_period</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "30d 0H 0M 0S"</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The object has class `Period`</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(scorpio_period)</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Period"</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,"package")</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "lubridate"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> Because periods work with “human” times like days, it is more intuitive. For example, if we add a period of <code>30</code> days to the <code>scorpio_start</code> datetime object, we get the expected end datetime that is <code>30</code> days later:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start datetime for Scorpio birthdays (time is midnight)</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>scorpio_start</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-10-23 PDT"</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co"># After adding 30 day period, we get the expected end datetime (time is midnight)</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>scorpio_start <span class="sc">+</span> <span class="fu">days</span>(<span class="dv">30</span>)</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-11-22 PST"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Working with duration
</summary>
<p>If we use <code>as.duration()</code> to get the duration of <code>scorpio_interval</code>, we see that it is a duration of <code>2595600</code> seconds. It takes into account the extra <code>1</code> hour gained due to daylight savings ending:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Duration is 2595600 seconds, which is equivalent to 30 24-hr days + 1 additional hour</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>scorpio_duration <span class="ot">&lt;-</span> <span class="fu">as.duration</span>(scorpio_interval)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>scorpio_duration</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2595600s (~4.29 weeks)"</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The object has class `Duration`</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(scorpio_duration)</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Duration"</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,"package")</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "lubridate"</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the standard 60s/min, 60min/hr, 24hr/day conversion,</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="co"># confirm duration is slightly more than 30 "standard" (ie. 24-hr) days</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="dv">2595600</span> <span class="sc">/</span> (<span class="dv">60</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">*</span> <span class="dv">24</span>)</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 30.04167</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Specifically, it is 30 days + 1 hour, if we define a day to have 24 hours</span></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a><span class="fu">seconds_to_period</span>(scorpio_duration)</span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "30d 1H 0M 0S"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br> Because durations work with physical time, when we add a duration of <code>30</code> days to the <code>scorpio_start</code> datetime object, we do not get the end datetime we’d expect:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start datetime for Scorpio birthdays (time is midnight)</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>scorpio_start</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-10-23 PDT"</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="co"># After adding 30 day duration, we do not get the expected end datetime</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="co"># `ddays(30)` adds the number of seconds in 30 standard 24-hr days, but one of the days has 25 hours</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>scorpio_start <span class="sc">+</span> <span class="fu">ddays</span>(<span class="dv">30</span>)</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-11-21 23:00:00 PST"</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We need to add the additional 1 hour of physical time that elapsed during this time span</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>scorpio_start <span class="sc">+</span> <span class="fu">ddays</span>(<span class="dv">30</span>) <span class="sc">+</span> <span class="fu">dhours</span>(<span class="dv">1</span>)</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "2023-11-22 PST"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><br></p>
</section>
</section>
<section id="appendix" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Appendix</h1>
<section id="special-characters" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="special-characters"><span class="header-section-number">6.1</span> Special Characters</h2>
<blockquote class="blockquote">
<p>“A sequence in a string that starts with a <code>\</code> is called an <strong>escape sequence</strong> and allows us to include special characters in our strings.”</p>
</blockquote>
<p><em>Credit: <a href="https://campus.datacamp.com/courses/string-manipulation-with-stringr-in-r/string-basics?ex=4">Escape sequences</a> from DataCamp</em></p>
<p><br> <strong>Special characters</strong> are characters that will not be interpreted literally.</p>
<p>Common <strong>special characters</strong>:</p>
<ul>
<li><code>\n</code>: newline</li>
<li><code>\t</code>: tab</li>
<li><code>\</code>: used for escaping purposes
<ul>
<li><code>\'</code>: literal single quote</li>
<li><code>\"</code>: literal double quote</li>
<li><code>\\</code>: literal backslash</li>
</ul></li>
</ul>
<p>These characters followed by a backslash <code>\</code> take on a new meaning. The <code>n</code> by itself is just an <code>n</code>. When you add a backslash to the <code>\n</code> you are escaping it and making it a special character where <code>\n</code> now represents a newline.</p>
<p><br> <strong>The <code>writeLines()</code> function</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>?writeLines</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co"># SYNTAX AND DEFAULT VALUES</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(text, <span class="at">con =</span> <span class="fu">stdout</span>(), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="at">useBytes =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>“<code>writeLines()</code> displays quotes and backslashes as they would be read, rather than as R stores them.” (From <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/writeLines">writeLines</a> documentation)</li>
<li>When we include <strong>escape sequences</strong> in the string, it is helpful to use <code>writeLines()</code> to see how the escaped string looks</li>
<li><code>writeLines()</code> will also output the string without showing the outer pair of double quotes that R uses to store it, so we only see the content of the string</li>
</ul>
<p><br></p>
<details>
<summary>
<strong>Example</strong>: Escaping single quotes
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">'Escaping single quote </span><span class="sc">\'</span><span class="st"> within single quotes'</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Escaping single quote ' within single quotes"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, we could’ve just created the string using double quotes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">"Single quote ' within double quotes does not need escaping"</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Single quote ' within double quotes does not need escaping"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using <code>writeLines()</code> shows us only the content of the string without the outer pair of double quotes that R uses to store strings:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(my_string)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Single quote ' within double quotes does not need escaping</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Escaping double quotes
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">"Escaping double quote </span><span class="sc">\"</span><span class="st"> within double quotes"</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Escaping double quote \" within double quotes"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternatively, we could’ve just created the string using single quotes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">'Double quote " within single quotes does not need escaping'</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Double quote \" within single quotes does not need escaping"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice how the backslash still showed up in the above output to escape our double quote from the outer pair of double quotes that R uses to store the string. This is no longer an issue if we use <code>writeLines()</code> to only show the string content:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(my_string)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Double quote " within single quotes does not need escaping</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Escaping double quotes within double quotes
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">"I called my mom and she said </span><span class="sc">\"</span><span class="st">Echale ganas!</span><span class="sc">\"</span><span class="st">"</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "I called my mom and she said \"Echale ganas!\""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using <code>writeLines()</code> shows us only the content of the string without the backslashes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(my_string)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; I called my mom and she said "Echale ganas!"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Escaping backslashes
</summary>
<p>To include a literal backslash in the string, we need to escape the backslash with another backslash:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">"The executable is located in C:</span><span class="sc">\\</span><span class="st">Program Files</span><span class="sc">\\</span><span class="st">Git</span><span class="sc">\\</span><span class="st">bin"</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "The executable is located in C:\\Program Files\\Git\\bin"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use <code>writeLines()</code> to see the escaped string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(my_string)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; The executable is located in C:\Program Files\Git\bin</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
<strong>Example</strong>: Other special characters
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>my_string <span class="ot">&lt;-</span> <span class="st">"A</span><span class="sc">\t</span><span class="st">B</span><span class="sc">\n</span><span class="st">C</span><span class="sc">\t</span><span class="st">D"</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>my_string</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "A\tB\nC\tD"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use <code>writeLines()</code> to see the escaped string:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(my_string)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; A    B</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; C    D</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<p><strong>Escape special characters using Twitter data</strong></p>
<p>Let’s take a look at some tweets from our PAC-12 universities.</p>
<ul>
<li>Let’s start by grabbing observations 1-3 from the <code>text</code> column.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Twitter example of \n newline special characters</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>p12_df<span class="sc">$</span>text[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "Big Dez is headed to Indy!\n\n#GoCougs | #NFLDraft2020 | @dadpat7 | @Colts | #NFLCougs https://t.co/NdGsvXnij7"                                                                                                                                                                  </span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [2] "Cougar Cheese. That's it. That's the tweet. 🧀#WSU #GoCougs https://t.co/0OWGvQlRZs"                                                                                                                                                                                             </span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [3] "Darien McLaughlin '19, and her dog, Yuki, went on a #Pullman distance walk this weekend. We will let you judge who was leading the way.🚶‍♀️🐕\n\nTweet a pic of how you are social distancing w/ the hashtag #CougsContain &amp;amp; tag @WSUPullman #GoCougs https://t.co/EltXDy1tPt"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Using <code>writeLines()</code> we can see the contents of the strings as they would be read, rather than as R stores them.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(p12_df<span class="sc">$</span>text[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>])</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Big Dez is headed to Indy!</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #GoCougs | #NFLDraft2020 | @dadpat7 | @Colts | #NFLCougs https://t.co/NdGsvXnij7</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Cougar Cheese. That's it. That's the tweet. 🧀#WSU #GoCougs https://t.co/0OWGvQlRZs</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Darien McLaughlin '19, and her dog, Yuki, went on a #Pullman distance walk this weekend. We will let you judge who was leading the way.🚶‍♀️🐕</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Tweet a pic of how you are social distancing w/ the hashtag #CougsContain &amp;amp; tag @WSUPullman #GoCougs https://t.co/EltXDy1tPt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
<strong>Example</strong>: Escaping double quotes using Twitter data
</summary>
<ul>
<li><p>Using Twitter data you may encounter a lot of strings with double quotes.</p>
<ul>
<li>In the example below, our string includes special characters <code>\"</code> and <code>\n</code> to escape the double quotes and the newline character.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Twitter example of \" double quotes special characters</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>p12_df<span class="sc">$</span>text[<span class="dv">24</span>]</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "\"I really am glad that inside Engineering Student Services, I’ve been able to connect with my ESS advisor and professional development advisors there.\"\n-Alexandro Garcia, Civil &amp;amp; Environmental Engineering, 3rd year\n#imaberkeleyengineer #iamberkeley #voicesofberkeleyengineering https://t.co/ToVEynIUWH"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Using <code>writeLines()</code> we can see the contents of the strings as they would be read, rather than as R stores them.</p>
<ul>
<li>We no longer see the escaped characters <code>\"</code> or <code>\n</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(p12_df<span class="sc">$</span>text[<span class="dv">24</span>])</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; "I really am glad that inside Engineering Student Services, I’ve been able to connect with my ESS advisor and professional development advisors there."</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -Alexandro Garcia, Civil &amp;amp; Environmental Engineering, 3rd year</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #imaberkeleyengineer #iamberkeley #voicesofberkeleyengineering https://t.co/ToVEynIUWH</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
</ul>
</details>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>